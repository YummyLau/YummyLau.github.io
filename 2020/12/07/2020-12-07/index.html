<!DOCTYPE html>




<html class="theme-next gemini" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="ÁÉ≠‰øÆÂ§ç,Android,">










<meta name="description" content="‰∏äÂë®‰∫îÁ∫ø‰∏äÈ°πÁõÆÂá∫Áé∞‰∫ÜÁ¥ßÊÄ•Áº∫Èô∑ÔºåÊó†Â•à‰πã‰∏ãÂë®ÂÖ≠Ëã¶ÈÄºÂä†Áè≠ÂèëË°•‰∏Åüò≠ÔºåÂîØ‰∏ÄÂÄºÂæóÊ¨£ÊÖ∞ÁöÑÊòØÁî±‰∫éÂá∫Áé∞Áº∫Èô∑ÁöÑÂäüËÉΩ‰ºöÂú®‰ªäÂ§©ÈÄöËøá ABTest ‰∏ãÂèëÔºåË°•‰∏ÅËµ∂Âú®‰∫ÜÂ§ßÊé®‰πãÂâç„ÄÇÂàöÂ•ΩÂë®Êó•Âú®ÂÆ∂Èó≤ÁùÄÔºåÂ∞±ÂÜô‰∏Ä‰∏ã„ÄåÊïëÊàë‰∫éÊ∞¥Ê∑±ÁÅ´ÁÉ≠ÁöÑÁÉ≠‰øÆÂ§ç„Äç„ÄÇ  Â∏åÊúõÂΩì‰Ω†ÁúãÂÆåËøôÁØáÊñáÁ´†‰πãÂêéÔºåËÉΩÂ§ü‰∫ÜËß£Âà∞Â∫îÁî®ÁÉ≠‰øÆÂ§çÂÆÉÂπ∂‰∏çÈöæÔºå‰πü‰∏çÈúÄË¶ÅËá™Â∑±ÈÄ†ËΩÆÂ≠êÔºå‰∏öÁïåÂæàÂ§ö‰ºòÁßÄÁöÑÊ°ÜÊû∂Â¶ÇTinkerÔºåRobustÔºåSophixÁ≠â„ÄÇ Â¶ÇÊûúÈ°πÁõÆËøòÊ≤°ÊúâÊîØÊåÅËøô‰∏™ÁÉ≠Êõ¥ËÉΩÂäõÔºåÂ∏åÊúõ‰Ω†ËÉΩÂ∞ùËØïÊäòËÖæ">
<meta name="keywords" content="ÁÉ≠‰øÆÂ§ç,Android">
<meta property="og:type" content="article">
<meta property="og:title" content="ÊïëÊàë‰∫éÊ∞¥Ê∑±ÁÅ´ÁÉ≠ÁöÑ„ÄåÁÉ≠‰øÆÂ§ç„Äç">
<meta property="og:url" content="http://yummylau.com/2020/12/07/2020-12-07/index.html">
<meta property="og:site_name" content="YummyLau">
<meta property="og:description" content="‰∏äÂë®‰∫îÁ∫ø‰∏äÈ°πÁõÆÂá∫Áé∞‰∫ÜÁ¥ßÊÄ•Áº∫Èô∑ÔºåÊó†Â•à‰πã‰∏ãÂë®ÂÖ≠Ëã¶ÈÄºÂä†Áè≠ÂèëË°•‰∏Åüò≠ÔºåÂîØ‰∏ÄÂÄºÂæóÊ¨£ÊÖ∞ÁöÑÊòØÁî±‰∫éÂá∫Áé∞Áº∫Èô∑ÁöÑÂäüËÉΩ‰ºöÂú®‰ªäÂ§©ÈÄöËøá ABTest ‰∏ãÂèëÔºåË°•‰∏ÅËµ∂Âú®‰∫ÜÂ§ßÊé®‰πãÂâç„ÄÇÂàöÂ•ΩÂë®Êó•Âú®ÂÆ∂Èó≤ÁùÄÔºåÂ∞±ÂÜô‰∏Ä‰∏ã„ÄåÊïëÊàë‰∫éÊ∞¥Ê∑±ÁÅ´ÁÉ≠ÁöÑÁÉ≠‰øÆÂ§ç„Äç„ÄÇ  Â∏åÊúõÂΩì‰Ω†ÁúãÂÆåËøôÁØáÊñáÁ´†‰πãÂêéÔºåËÉΩÂ§ü‰∫ÜËß£Âà∞Â∫îÁî®ÁÉ≠‰øÆÂ§çÂÆÉÂπ∂‰∏çÈöæÔºå‰πü‰∏çÈúÄË¶ÅËá™Â∑±ÈÄ†ËΩÆÂ≠êÔºå‰∏öÁïåÂæàÂ§ö‰ºòÁßÄÁöÑÊ°ÜÊû∂Â¶ÇTinkerÔºåRobustÔºåSophixÁ≠â„ÄÇ Â¶ÇÊûúÈ°πÁõÆËøòÊ≤°ÊúâÊîØÊåÅËøô‰∏™ÁÉ≠Êõ¥ËÉΩÂäõÔºåÂ∏åÊúõ‰Ω†ËÉΩÂ∞ùËØïÊäòËÖæ">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://raw.githubusercontent.com/YummyLau/hexo/master/source/pics/20200502/patch_info_1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YummyLau/hexo/master/source/pics/20200502/patch_info_2.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YummyLau/hexo/master/source/pics/20200502/patch_info_3.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YummyLau/hexo/master/source/pics/20200502/patch_info_5.jpg">
<meta property="og:updated_time" content="2022-02-06T18:25:08.924Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ÊïëÊàë‰∫éÊ∞¥Ê∑±ÁÅ´ÁÉ≠ÁöÑ„ÄåÁÉ≠‰øÆÂ§ç„Äç">
<meta name="twitter:description" content="‰∏äÂë®‰∫îÁ∫ø‰∏äÈ°πÁõÆÂá∫Áé∞‰∫ÜÁ¥ßÊÄ•Áº∫Èô∑ÔºåÊó†Â•à‰πã‰∏ãÂë®ÂÖ≠Ëã¶ÈÄºÂä†Áè≠ÂèëË°•‰∏Åüò≠ÔºåÂîØ‰∏ÄÂÄºÂæóÊ¨£ÊÖ∞ÁöÑÊòØÁî±‰∫éÂá∫Áé∞Áº∫Èô∑ÁöÑÂäüËÉΩ‰ºöÂú®‰ªäÂ§©ÈÄöËøá ABTest ‰∏ãÂèëÔºåË°•‰∏ÅËµ∂Âú®‰∫ÜÂ§ßÊé®‰πãÂâç„ÄÇÂàöÂ•ΩÂë®Êó•Âú®ÂÆ∂Èó≤ÁùÄÔºåÂ∞±ÂÜô‰∏Ä‰∏ã„ÄåÊïëÊàë‰∫éÊ∞¥Ê∑±ÁÅ´ÁÉ≠ÁöÑÁÉ≠‰øÆÂ§ç„Äç„ÄÇ  Â∏åÊúõÂΩì‰Ω†ÁúãÂÆåËøôÁØáÊñáÁ´†‰πãÂêéÔºåËÉΩÂ§ü‰∫ÜËß£Âà∞Â∫îÁî®ÁÉ≠‰øÆÂ§çÂÆÉÂπ∂‰∏çÈöæÔºå‰πü‰∏çÈúÄË¶ÅËá™Â∑±ÈÄ†ËΩÆÂ≠êÔºå‰∏öÁïåÂæàÂ§ö‰ºòÁßÄÁöÑÊ°ÜÊû∂Â¶ÇTinkerÔºåRobustÔºåSophixÁ≠â„ÄÇ Â¶ÇÊûúÈ°πÁõÆËøòÊ≤°ÊúâÊîØÊåÅËøô‰∏™ÁÉ≠Êõ¥ËÉΩÂäõÔºåÂ∏åÊúõ‰Ω†ËÉΩÂ∞ùËØïÊäòËÖæ">
<meta name="twitter:image" content="https://raw.githubusercontent.com/YummyLau/hexo/master/source/pics/20200502/patch_info_1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Âçö‰∏ª'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yummylau.com/2020/12/07/2020-12-07/">





  <title>ÊïëÊàë‰∫éÊ∞¥Ê∑±ÁÅ´ÁÉ≠ÁöÑ„ÄåÁÉ≠‰øÆÂ§ç„Äç | YummyLau</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">YummyLau</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Keep movingÔºÅ</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            È¶ñÈ°µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            ÂÖ≥‰∫é
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Ê†áÁ≠æ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            ÂàÜÁ±ª
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            ÂΩíÊ°£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yummylau.com/2020/12/07/2020-12-07/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yummyLau">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YummyLau">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ÊïëÊàë‰∫éÊ∞¥Ê∑±ÁÅ´ÁÉ≠ÁöÑ„ÄåÁÉ≠‰øÆÂ§ç„Äç</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ÂèëË°®‰∫é</span>
              
              <time title="ÂàõÂª∫‰∫é" itemprop="dateCreated datePublished" datetime="2020-12-07T16:40:00+08:00">
                2020-12-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">ÂàÜÁ±ª‰∫é</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/12/07/2020-12-07/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/12/07/2020-12-07/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>‰∏äÂë®‰∫îÁ∫ø‰∏äÈ°πÁõÆÂá∫Áé∞‰∫ÜÁ¥ßÊÄ•Áº∫Èô∑ÔºåÊó†Â•à‰πã‰∏ãÂë®ÂÖ≠Ëã¶ÈÄºÂä†Áè≠ÂèëË°•‰∏Åüò≠ÔºåÂîØ‰∏ÄÂÄºÂæóÊ¨£ÊÖ∞ÁöÑÊòØÁî±‰∫éÂá∫Áé∞Áº∫Èô∑ÁöÑÂäüËÉΩ‰ºöÂú®‰ªäÂ§©ÈÄöËøá ABTest ‰∏ãÂèëÔºåË°•‰∏ÅËµ∂Âú®‰∫ÜÂ§ßÊé®‰πãÂâç„ÄÇÂàöÂ•ΩÂë®Êó•Âú®ÂÆ∂Èó≤ÁùÄÔºåÂ∞±ÂÜô‰∏Ä‰∏ã„ÄåÊïëÊàë‰∫éÊ∞¥Ê∑±ÁÅ´ÁÉ≠ÁöÑÁÉ≠‰øÆÂ§ç„Äç„ÄÇ</p>
</blockquote>
<p>Â∏åÊúõÂΩì‰Ω†ÁúãÂÆåËøôÁØáÊñáÁ´†‰πãÂêéÔºåËÉΩÂ§ü‰∫ÜËß£Âà∞Â∫îÁî®<strong>ÁÉ≠‰øÆÂ§ç</strong>ÂÆÉÂπ∂‰∏çÈöæÔºå‰πü‰∏çÈúÄË¶ÅËá™Â∑±ÈÄ†ËΩÆÂ≠êÔºå‰∏öÁïåÂæàÂ§ö‰ºòÁßÄÁöÑÊ°ÜÊû∂Â¶Ç<strong>Tinker</strong>Ôºå<strong>Robust</strong>Ôºå<strong>Sophix</strong>Á≠â„ÄÇ</p>
<p>Â¶ÇÊûúÈ°πÁõÆËøòÊ≤°ÊúâÊîØÊåÅËøô‰∏™ÁÉ≠Êõ¥ËÉΩÂäõÔºåÂ∏åÊúõ‰Ω†ËÉΩÂ∞ùËØïÊäòËÖæÊÖ¢ÊÖ¢Êé•ÂÖ•ÔºåËøô‰∏ç‰ªÖ‰ªÖËÉΩÂ≠¶‰π†Âà∞Êñ∞Áü•ËØÜ‰πüËÉΩ‰∏∫ÊúçÂä°È°πÁõÆÊèê‰æõÂÆπÈîôËÉΩÂäõ„ÄÇ</p>
<p>ÊñáÁ´†ÁØáÂπÖÊØîËæÉÈïøÔºåÂ∏åÊúõÂêÑ‰ΩçÁúãÂÆòËÉΩËÄêÂøÉÁúãÂÆåÔºåÊéåÊè°Êï¥‰ΩìÊÄùË∑ØÂπ∂ÊúâÊâÄÊî∂Ëé∑„ÄÇ</p>
<blockquote>
<p>ÁºñÁ®ãÊòØ‰∏∫‰∫Ü‰∏öÂä°Ëß£ÂÜ≥ÈóÆÈ¢òÔºåÂ≠¶‰π†ÁºñÁ®ãÁöÑÊ†∏ÂøÉÊòØÊéåÊè°Á®ãÂ∫èÂÆûÁé∞ÁöÑÊÄùË∑ØÔºåËÄå‰ª£Á†ÅÂè™ÊòØ‰∏ÄÁßçÂÆûÁé∞Á®ãÂ∫èÁöÑÂ∑•ÂÖ∑„ÄÇ</p>
</blockquote>
<p>‰∏ãÈù¢‰ªéÊñáÁ´†Âõ¥Áªï <strong>ÊäÄÊúØÂéüÁêÜ</strong>-<strong>ÊäÄÊúØÈÄâÂûã</strong>Âèä<strong>ÂÆûË∑µÊµÅÁ®ã</strong>Â±ïÂºÄ„ÄÇ</p>
<h2 id="ÊäÄÊúØÂéüÁêÜ"><a href="#ÊäÄÊúØÂéüÁêÜ" class="headerlink" title="ÊäÄÊúØÂéüÁêÜ"></a>ÊäÄÊúØÂéüÁêÜ</h2><p>ÁÉ≠‰øÆÂ§çÊåâÁÖßÁ±ª‰øÆÂ§çÊó∂Êú∫ÂèØÂàÜ‰∏∫<strong>Á±ªÂÜ∑‰øÆÂ§ç</strong>Âèä<strong>Á±ªÁÉ≠Êõ¥Êñ∞</strong>„ÄÇ</p>
<p>ÊâÄË∞ì<strong>Á±ªÂÜ∑‰øÆÂ§ç</strong>ÊòØÊåáÂ∫îÁî®ÈáçÂêØ‰πãÂêéÈÄöËøáÂä†ËΩΩ‰øÆÂ§çÂêéÁöÑÁ±ªÊñá‰ª∂Êù•‰øÆÂ§çÁ±ªÂ∑≤Áü•ÁöÑÈóÆÈ¢òÔºåËÄå<strong>Á±ªÁÉ≠Êõ¥Êñ∞</strong>ÂàôÊòØ‰∏çÈúÄË¶ÅÈáçÂêØÂ∫îÁî®ÂâçÊèê‰∏ã‰øÆÂ§çÁ±ªÂ∑≤Áü•ÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p>Âè¶Â§ñÁÉ≠Êõ¥‰øÆÂ§çÁöÑÂØπË±°ËøòÂèØÂåÖÊã¨<strong>SOÂ∫ì</strong>Âèä<strong>ËµÑÊ∫êÊñá‰ª∂</strong>„ÄÇ</p>
<p>‰∏ãÈù¢ÈíàÂØπ<strong>Á±ªÂÜ∑‰øÆÂ§ç</strong>Ôºå<strong>Á±ªÁÉ≠Êõ¥Êñ∞</strong>Ôºå<strong>SOÂ∫ì‰øÆÂ§ç</strong>Âèä<strong>ËµÑÊ∫êÊñá‰ª∂‰øÆÂ§ç</strong>ËøõË°å‰∫ÜËß£„ÄÇ</p>
<h3 id="Á±ªÂÜ∑‰øÆÂ§ç"><a href="#Á±ªÂÜ∑‰øÆÂ§ç" class="headerlink" title="Á±ªÂÜ∑‰øÆÂ§ç"></a>Á±ªÂÜ∑‰øÆÂ§ç</h3><p>‰∏Ä‰∏™<strong>ClassÊñá‰ª∂</strong>Ëã•Â∑≤Ë¢´<strong>JVMËôöÊãüÊú∫</strong>ÊâÄÂä†ËΩΩÔºåÂè™ËÉΩÈÄöËøáÈáçÂêØÊâãÊÆµËß£ÂÜ≥Êù•Ê∏ÖÈô§ËôöÊãüÊú∫‰∏≠Â∑≤‰øùÂ≠òÁöÑÁ±ª‰ø°ÊÅØ„ÄÇ</p>
<p>Êàë‰ª¨‰ª•<strong>QZone</strong><a href="https://mp.weixin.qq.com/s?__biz=MzI1MTA1MzM2Nw==&amp;mid=400118620&amp;idx=1&amp;sn=b4fdd5055731290eef12ad0d17f39d4a&amp;scene=0" title="ÊèíÊ°©ÊñπÊ°à" target="_blank" rel="noopener">ÊèíÊ°©ÊñπÊ°à</a> Âíå<strong>ÂæÆ‰ø°</strong><a href="https://github.com/Tencent/tinker" title="tinkerÊñπÊ°à" target="_blank" rel="noopener">tinkerÊñπÊ°à</a> ÊñπÊ°à‰∏∫ÂàÜÊûêÔºåÂπ∂ÂºïÁî®<strong>SophixÊñπÊ°à</strong>ÁöÑÊ≥ïÂÅöÂØπÊØî„ÄÇ</p>
<h4 id="QZoneÊñπÊ°à"><a href="#QZoneÊñπÊ°à" class="headerlink" title="QZoneÊñπÊ°à"></a>QZoneÊñπÊ°à</h4><p>‰∏Ä‰∏™<strong>ClassLoader</strong>ÂèØÂä†ËΩΩÂ§ö‰∏™<strong>DEXÊñá‰ª∂</strong>ÔºåÊØè‰∏Ä‰∏™<strong>DEXÊñá‰ª∂</strong>Ë¢´Âä†ËΩΩÂêéÂú®ÂÜÖÂ≠ò‰∏≠Ë°®Áé∞‰∏∫‰∏Ä‰∏™ <em>Element</em> ÂØπË±°ÔºåÂ§ö‰∏™<strong>DEXÊñá‰ª∂</strong>Ë¢´Âä†ËΩΩÂêéÂàôÊéíÂàóÊàê‰∏Ä‰∏™ÊúâÂ∫èÊï∞ÁªÑ <em>dexElements</em>„ÄÇ ÂØπ‰∫é <a href="http://yummylau.com/2019/03/01/java_2019-03-01_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/" title="ClassLoader">ClassLoader</a> ‰∏çÁÜüÊÇâÁöÑÊúãÂèãÔºåÂª∫ËÆÆÂÖàÁúãÁúãÈìæÊé•ÈáåÁöÑÂÇ®Â§áÁü•ËØÜ„ÄÇ</p>
<p>Â¶ÇÊûúÁ±ªÂ∑≤Ë¢´<strong>ClassLoader</strong>Âä†ËΩΩÔºåÈÇ£‰πàÊü•ÊâæÂÖ∂ÂØπÂ∫î <em>class</em> ÂØπË±°ÊòØÈÄöËøáË∞ÉÁî® <em>findClass(String name, List<throwable> suppressed)</throwable></em> ÊñπÊ≥ïÂÆûÁé∞„ÄÇÊï¥‰∏™ËøáÁ®ã‰∏≠Â¶ÇÊûúÂ≠òÂú®Â∑≤Êü•ÊâæÁöÑ <em>class</em> ÂØπË±° ÔºåÂàôÁõ¥Êé•ËøîÂõûËØ• <em>class</em> ÂØπË±°„ÄÇÊâÄ‰ª•<strong>QZone</strong>ÊñπÊ°àÊòØÊää‰øÆÂ§çËøáÁöÑÁ±ªÊâìÂåÖÊàêÊñ∞ÁöÑ<strong>DEXÊñá‰ª∂</strong>ÔºåÊääËØ•Êñá‰ª∂‰ºòÂÖàÂä†ËΩΩÂêéÊèíÂà∞ <em>dexElements</em> ‰∏≠‰∏îÊéíÂú®‰∫ÜÂæÖ‰øÆÂ§çÁ±ªÊâÄÂú® <em>Element</em> ÂØπË±°ÂâçÈù¢„ÄÇ</p>
<p>Ëøô‰∏™ÊñπÊ°àÊ∂âÂèäÂà∞Á±ªÊ†°È™åÔºåÂèØËÉΩ‰ºöÂõ†‰∏∫<strong>DEXÊñá‰ª∂</strong>Ë¢´‰ºòÂåñËÄåÂØºËá¥ÂºÇÂ∏∏ÔºöÂΩìÊàë‰ª¨Á¨¨‰∏ÄÊ¨°ÂÆâË£Ö APK Êó∂ÔºåËôöÊãüÊú∫Â¶ÇÊûúÊ£ÄÊµãÂà∞Êúâ‰∏ÄÈ°π <em>verify</em> ÂèÇÊï∞Ë¢´ÊâìÂºÄÔºåÂàô‰ºöÂØπ<strong>DEXÊñá‰ª∂</strong>ÊâßË°å <em>dexopt</em> ‰ºòÂåñ„ÄÇÂ¶ÇÊûú‰ΩøÁî®‰∏äËø∞ÊñπÊ°àÊèíÂÖ•‰∏Ä‰∏™<strong>DEXÊñá‰ª∂</strong>ÔºåÂàô‰ºöÂÖàÊâßË°å <em>dexopt</em>ÔºåËøô‰∏™ËøáÁ®ãÂèØËÉΩ‰ºöÊäõÂá∫ÂºÇÂ∏∏ <em>dvmThrowIllegalAccessError</em>„ÄÇ</p>
<p>ÈÄöËøáÊà™Âèñ <a href="https://android.googlesource.com/platform/dalvik.git/+/android-4.2.2_r1/vm/analysis/DexPrepare.cpp" title="DexPrepare.cpp#verifyAndOptimizeClass" target="_blank" rel="noopener">DexPrepare.cpp#verifyAndOptimizeClass</a> Ê†∏ÂøÉ‰ª£Á†ÅÂπ∂ÂÅöÊ≥®ÈáäÈòêËø∞Ôºö</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> verifyAndOptimizeClass(DexFile* pDexFile, ClassObject* clazz,</span><br><span class="line">    <span class="keyword">const</span> DexClassDef* pClassDef, <span class="keyword">bool</span> doVerify, <span class="keyword">bool</span> doOpt)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (doVerify) &#123;</span><br><span class="line">  </span><br><span class="line">         <span class="comment">// ÁõÆÁöÑÂú®‰∫éÈò≤Ê≠¢Á±ªÂ§ñÈÉ®Ë¢´ÁØ°Êîπ„ÄÇ</span></span><br><span class="line">         <span class="comment">// ‰ºöÂØπÁ±ªÁöÑ static ÊñπÊ≥ïÔºåprivate ÊñπÊ≥ïÔºåÊûÑÈÄ†ÂáΩÊï∞ÔºåËôöÂáΩÊï∞(ÂèØË¢´ÁªßÊâøÁöÑÂáΩÊï∞) ËøõË°åÊ†°È™å„ÄÇ</span></span><br><span class="line">         <span class="comment">// Â¶ÇÊûúÁ±ªÁöÑÊâÄÊúâÊñπÊ≥ï‰∏≠Áõ¥Êé•ÂºïÁî®Âà∞ÁöÑÁ¨¨‰∏ÄÂ±ÇÁ±ªÂíåÂΩìÂâçÁ±ªÊòØÂú®Âêå‰∏Ä‰∏™ dex Êñá‰ª∂ÔºåÂàô‰ºöËøîÂõû true</span></span><br><span class="line">        <span class="keyword">if</span> (dvmVerifyClass(clazz)) &#123;</span><br><span class="line">  </span><br><span class="line">            <span class="comment">// Â¶ÇÊûúÊª°Ë∂≥Ê†°È™åËßÑÂàôÔºåÂàôÊâì‰∏ä CLASS_ISPREVERIFIEDÔºåËÆæÁΩÆ verified ‰∏∫ true</span></span><br><span class="line">            ((DexClassDef*)pClassDef)-&gt;accessFlags |= <span class="built_in">CLASS_ISPREVERIFIED</span>;	 </span><br><span class="line">            verified = <span class="literal">true</span>;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (doOpt) &#123;</span><br><span class="line">        <span class="keyword">bool</span> needVerify = (gDvm.dexOptMode == OPTIMIZE_MODE_VERIFIED ||</span><br><span class="line">                           gDvm.dexOptMode == OPTIMIZE_MODE_FULL);</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (verified || needVerify) &#123;</span><br><span class="line">  </span><br><span class="line">            <span class="comment">//ÊääÈÉ®ÂàÜÊåá‰ª§‰ºòÂåñÊàêËôöÊãüÊú∫ÂÜÖÈÉ®Êåá‰ª§Ôºå‰∏∫‰∫ÜÊèêÂçáÊñπÊ≥ïÁöÑÊâßË°åÈÄüÂ∫¶„ÄÇ</span></span><br><span class="line">            dvmOptimizeClass(clazz, <span class="literal">false</span>);  <span class="comment">//Optimize class</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// ÂÜçÊâì‰∏ä CLASS_ISOPTIMIZED</span></span><br><span class="line">            ((DexClassDef*)pClassDef)-&gt;accessFlags |= <span class="built_in">CLASS_ISOPTIMIZED</span>; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÊâÄ‰ª•Âè™ÈúÄË¶ÅÁêÜËß£Â¶ÇÊûú‰∏Ä‰∏™Á±ªÊª°Ë∂≥Ê†°È™åÊù°‰ª∂ÔºåÂ∞±‰ºöË¢´Êâì‰∏ä <strong>CLASS_ISPREVERIFIED</strong>„ÄÇÂÖ∑‰ΩìÂÅöÊ≥ïÊòØÂéªÊ†°È™å Class ÊâÄÊúâ <em>directMethod</em> Âíå <em>virtualMethod</em>ÔºåÂåÖÂê´‰∫ÜÔºö</p>
<ul>
<li>static ÊñπÊ≥ï</li>
<li>private ÊñπÊ≥ï</li>
<li>ÊûÑÈÄ†Âô®ÊñπÊ≥ï</li>
<li>ËôöÂáΩÊï∞</li>
<li>‚Ä¶</li>
</ul>
<p>Ëøô‰∫õÊñπÊ≥ï‰∏≠Á¨¨‰∏ÄÂ±ÇÁ∫ßÂÖ≥Á≥ªÂºïÁî®Âà∞ÁöÑÁ±ªÊòØÂú®Âêå‰∏Ä‰∏™<strong>DEXÊñá‰ª∂</strong>ÔºåÂàô‰ºöË¢´Êâì‰∏äÊ†°È™åÈÄöËøáË¢´Êâì‰∏ä<strong>CLASS_ISPREVERIFIED</strong>„ÄÇ</p>
<p>ÈÇ£‰πàË¢´Êâì‰∏ä <strong>CLASS_ISPREVERIFIED</strong> ÈÇ£‰πà‰∏∫‰Ωï‰ºöÊúâÂºÇÂ∏∏Âë¢Ôºü</p>
<p>ÂÅáÂ¶ÇÂéüÂÖàÊúâ‰∏™<strong>DEXÊñá‰ª∂</strong>‰∏≠Á±ª<strong>B</strong>ÂºïÁî®‰∫ÜÁ±ª<strong>A</strong>ÔºåÊóßÁöÑÁ±ª<strong>A</strong>‰∏éÁ±ª<strong>B</strong>Âú®Âêå‰∏Ä‰∏™<strong>DEXÊñá‰ª∂</strong>ÔºåÂàô<strong>B</strong>‰ºöË¢´Êâì‰∏ä<strong>CLASS_ISPREVERIFIED</strong>ÔºåÁé∞Âú®‰øÆÂ§ç<strong>DEXÊñá‰ª∂</strong>ÂåÖÂê´‰∫ÜÁ±ª<strong>A</strong>ÔºåÂΩìÁ±ª<strong>B</strong>Êüê‰∏™ÊñπÊ≥ïÂºïÁî®Âà∞Á±ª<strong>A</strong>Êó∂Â∞ùËØïÂéªËß£ÊûêÁ±ª<strong>A</strong>„ÄÇ</p>
<p>ÈÄöËøáÊà™Âèñ<a href="https://android.googlesource.com/platform/dalvik.git/+/android-4.2.2_r1/vm/oo/Resolve.cpp" title="Resolve.cpp#dvmResolveClass" target="_blank" rel="noopener">Resolve.cpp#dvmResolveClass</a> Ê†∏ÂøÉ‰ª£Á†ÅÂπ∂ÂÅöÊ≥®ÈáäÈòêËø∞Ôºö</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ClassObject* dvmResolveClass(<span class="keyword">const</span> ClassObject* referrer, u4 classIdx,bool fromUnverifiedConstant)&#123;</span><br><span class="line">    <span class="keyword">if</span> (resClass != <span class="keyword">NULL</span>) &#123;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//Ê≠§Êó∂ B Á±ªÂ∑≤ÁªèË¢´Êâì‰∏ä CLASS_ISPREVERIFIEDÔºåÊª°Ë∂≥Êù°‰ª∂</span></span><br><span class="line">        <span class="keyword">if</span> (!fromUnverifiedConstant &amp;&amp;</span><br><span class="line">            IS_CLASS_FLAG_SET(referrer, CLASS_ISPREVERIFIED)) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//Ë¢´ÂºïÁî®Á±ª A</span></span><br><span class="line">            ClassObject* resClassCheck = resClass;   </span><br><span class="line">      </span><br><span class="line">            <span class="comment">//ÂèëÁé∞Á±ª A Âíå Á±ª B ‰∏çÂú®Âêå‰∏Ä‰∏™ dex</span></span><br><span class="line">            <span class="keyword">if</span> (referrer-&gt;pDvmDex != resClassCheck-&gt;pDvmDex &amp;&amp;</span><br><span class="line">                resClassCheck-&gt;classLoader != <span class="keyword">NULL</span>)  </span><br><span class="line">            &#123;</span><br><span class="line">                dvmThrowIllegalAccessError(</span><br><span class="line">                    <span class="string">"Class ref in pre-verified class resolved to unexpected "</span></span><br><span class="line">                    <span class="string">"implementation"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">NULL</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        dvmDexSetResolvedClass(pDvmDex, classIdx, resClass);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>‰∏∫‰∫ÜËß£ÂÜ≥Á±ªÊ†°È™åÁöÑÈóÆÈ¢òÔºåÈúÄË¶ÅÈÅøÂÖçÁ±ªË¢´Êâì‰∏ä<strong>CLASS_ISPREVERIFIED</strong>ÔºåÈÇ£‰πàÂè™ÈúÄË¶Å‰øùËØÅ <em>dvmVerifyClass</em> ËøîÂõû <em>false</em> Âç≥ÂèØ„ÄÇ</p>
<p>QZone ÁöÑÂÅöÊ≥ïÊòØ‰ΩøÁî®Â≠óËäÇÁ†Å‰øÆÊîπÊäÄÊúØÔºåÂú®ÊâÄÊúâ <em>class</em> ÊûÑÈÄ†Âô®‰∏≠ÂºïÁî®‰∏Ä‰∏™ <strong>Â∏ÆÂä©Á±ª</strong>ÔºåËØ•Á±ªÂçïÁã¨Â≠òÊîæÂú®‰∏Ä‰∏™<strong>DEXÊñá‰ª∂</strong>‰∏≠ÔºåÂ∞±ÂèØ‰ª•ÂÆûÁé∞ÊâÄÊúâÁ±ªÈÉΩ‰∏ç‰ºöË¢´Êâì‰∏ä <strong>CLASS_ISPREVERIFIED</strong> Ê†áÂøóÔºåËøõËÄåÈÅøÂÖçÂú® <em>dvmResolveClass</em> Ëß£Êûê‰∏≠Âá∫Áé∞ÂºÇÂ∏∏„ÄÇ</p>
<p>‰∏äËø∞‰æãÂ≠êÁ±ª<strong>B</strong>Áî±‰∫éÂºïÁî®Á±ªÂ∏ÆÂä©Á±ªËøõËÄå‰∏ç‰ºöË¢´Êâì‰∏ä<strong>CLASS_ISPREVERIFIED</strong>ÔºåÊâÄ‰ª•Âä†ËΩΩ‰øÆÂ§çÂêéÁöÑÁ±ª<strong>A</strong>‰πü‰∏ç‰ºöÊúâÈóÆÈ¢ò„ÄÇ</p>
<p>ÂΩìÁÑ∂ËøôÊ†∑ÁöÑÂÅöÊ≥ï‰πüÂ≠òÂú®ÁöÑÈóÆÈ¢ò‰∏éÈôêÂà∂ÔºöÁî±‰∫éÁ±ªÁöÑÂä†ËΩΩÊ∂âÂèä <em>dvmResolveClass</em>Ôºå<em>dvmLinkClass</em> Âíå <em>dvmInitClass</em> ‰∏â‰∏™Èò∂ÊÆµ„ÄÇ</p>
<p><em>dvmInitClass</em> ‰ºöÂú®Á±ªËß£ÊûêÂÆåÂπ∂Â∞ùËØïÂàùÂßãÂåñÁ±ªÊó∂ÊâßË°åÔºåÂ¶ÇÊûúÁ±ªÊ≤°ÊúâË¢´Êâì‰∏ä<strong>CLASS_ISPREVERIFIED</strong> Êàñ <strong>CLASS_ISOPTIMIZED</strong>ÔºåÊ†°È™åÂíå‰ºòÂåñÈÉΩ‰ºöÂú®ËØ•Èò∂ÊÆµËøõË°å„ÄÇ</p>
<p>Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÁ±ªÁöÑÊ†°È™åÂíå‰ºòÂåñÂ∫îËØ•Âú® APK Á¨¨‰∏ÄÊ¨°ÂÆâË£ÖÁöÑÊó∂ÂÄôÊâßË°å <em>dexopt</em> Êìç‰ΩúÊó∂ÊâßË°åÔºå‰ΩÜÊòØÊàë‰ª¨Âπ≤È¢Ñ‰∫Ü<strong>CLASS_ISPREVERIFIED</strong>ÁöÑËÆæÁΩÆÊµÅÁ®ãÂØºËá¥Âú®Âêå‰∏ÄÊó∂Èó¥Âä†ËΩΩÂ§ßÈáèÁ±ª‰∏îËøõË°åÊ†°È™åÂèä‰ºòÂåñÔºåÂÆπÊòìÂú®Â∫îÁî®ÂêØÂä®Êó∂Âá∫Áé∞ÁôΩÂ±è„ÄÇ</p>
<h3 id="ÊâãQÊñπÊ°à"><a href="#ÊâãQÊñπÊ°à" class="headerlink" title="ÊâãQÊñπÊ°à"></a>ÊâãQÊñπÊ°à</h3><p>‰∏∫‰∫ÜÈÅøÂÖçÊèíÊ°©Â∏¶Êù•ÁöÑÊÄßËÉΩÈóÆÈ¢òÔºåÊâãQÂàôÈÄâÊã©Âú® <em>dvmResolveClass</em> ÈÅøÂºÄ‰∫Ü <strong>CLASS_ISPREVERIFIED</strong> Áõ∏ÂÖ≥ÈÄªËæë„ÄÇ</p>
<p>ÂèÇËÄÉ‰∏äÈù¢ <a href="https://android.googlesource.com/platform/dalvik.git/+/android-4.2.2_r1/vm/oo/Resolve.cpp" title="Resolve.cpp#dvmResolveClass" target="_blank" rel="noopener">Resolve.cpp#dvmResolveClass</a>ÁöÑÊ†∏ÂøÉÈÄªËæëÂèØÁü•Ôºö</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ClassObject* <span class="title">dvmResolveClass</span><span class="params">(<span class="keyword">const</span> ClassObject* referrer, u4 classIdx,<span class="keyword">bool</span> fromUnverifiedConstant)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	DvmDex* pDvmDex = referrer-&gt;pDvmDex;</span><br><span class="line">	</span><br><span class="line">	 <span class="comment">//‰ªédexÁºìÂ≠ò‰∏≠Êü•ÊâæÁ±ª classÔºåÂàôÁõ¥Êé•ËøîÂõû</span></span><br><span class="line">	 resClass = dvmDexGetResolvedClass(pDvmDex, classIdx);</span><br><span class="line">    <span class="keyword">if</span> (resClass != <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> resClass;</span><br><span class="line">     </span><br><span class="line">     <span class="comment">//... resClassËµãÂÄºÂ∑•‰Ωú</span></span><br><span class="line">    <span class="keyword">if</span> (resClass != <span class="literal">NULL</span>) &#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//ËÆ∞‰Ωè fromUnverifiedConstant Ëøô‰∏™ÂèòÈáè</span></span><br><span class="line">       <span class="keyword">if</span> (!fromUnverifiedConstant &amp;&amp;IS_CLASS_FLAG_SET(referrer, CLASS_ISPREVERIFIED))&#123;</span><br><span class="line">          <span class="comment">//...Á±ªÊ†°È™åÊµÅÁ®ã</span></span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">		     <span class="comment">//Â∑≤ÁªèËß£ÊûêÁöÑÁ±ªÊîæÂÖ• dex ÁºìÂ≠ò</span></span><br><span class="line">       dvmDexSetResolvedClass(pDvmDex, classIdx, resClass);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><em>dvmDexGetResolvedClass</em> ÊñπÊ≥ïÊòØÂ∞ùËØï‰ªé <em>dex</em> ÁºìÂ≠ò‰∏≠Êü•ÊâæÂºïÁî®ÁöÑÁ±ªÔºåÊâæÂà∞‰∫ÜÂ∞±Áõ¥Êé•ËøîÂõûÔºõ</li>
<li><em>dvmDexSetResolvedClass</em> ÊñπÊ≥ïÊòØÂ∞ÜÂ∑≤ÁªèËß£ÊûêÁöÑÁ±ªÂ≠òÂÖ• <em>dex</em> ÁºìÂ≠ò‰∏≠„ÄÇ</li>
</ul>
<p>ÊâÄ‰ª•Âè™ÈúÄË¶ÅÂ∞ÜË°•‰∏ÅÁ±ª<strong>A</strong>ÊèêÂâçËß£ÊûêÂπ∂ËÆæÁΩÆ <strong>fromUnverifiedConstant</strong> ‰∏∫ true ÁªïËøáÁ±ªÊ†°È™åÔºåÁÑ∂ÂêéÊää<strong>A</strong>Â≠òÂÇ® <em>dex</em> ÁºìÂ≠ò‰∏≠Â∞±ÂèØ‰ª•ËææÂà∞ÊïàÊûú„ÄÇËøô‰∏ÄÊ≠•ÂèØ‰ª•ÈÄöËøá <em>jni</em> ‰∏ªÂä®Ë∞ÉÁî® <em>dalvik#dvmRsolveClass</em> ÊñπÊ≥ïÂÆûÁé∞„ÄÇ</p>
<p>ÂêéÁª≠ÂºïÁî®Âà∞ËØ•Ë°•‰∏ÅÁ±ª A ÁöÑÊó∂ÂÄôÂ∞±ÂèØ‰ª•Áõ¥Êé•‰ªé dex ÁºìÂ≠ò‰∏≠ÊâæÂà∞„ÄÇÂΩìÁ±ª<strong>B</strong>Âú®Ê†°È™åÊòØÂê¶ÂíåÁ±ª<strong>A</strong>Âú®Âêå‰∏Ä‰∏™ <em>dex</em>Êó∂ÊòØÈÄöËøá‰ª•‰∏ãÊù°‰ª∂Ôºö</p>
<p><strong>referrer-&gt;pDvmDex != resClassCheck-&gt;pDvmDex</strong></p>
<p>Â¶ÇÊûú‰∏çÊâìÁ†¥Ëøô‰∏™Êù°‰ª∂Ôºå‰æùÁÑ∂‰ºöÂá∫Áé∞ÂºÇÂ∏∏„ÄÇÊâÄ‰ª•ÂØπË°•‰∏ÅÁ±ª<strong>A</strong>ËøõË°å <em>dex</em> ÁºìÂ≠òÊó∂ÊãøÂà∞ÁöÑ <em>pDvmDex</em> Â∫îËØ•ÊåáÂêëÂéüÊù•Á±ª<strong>A</strong>ÊâÄÂú®ÁöÑ dex „ÄÇ</p>
<p>ÈÇ£‰πàÂú® <em>dalvik#dvmRsolveClass</em> ÁöÑËøáÁ®ã‰∏≠Ôºå<em>referrer</em> Âíå <em>classIdx</em> Ë¶ÅÊÄé‰πàÁ°ÆÂÆöÔºü</p>
<ul>
<li><em>referrer</em> ‰∏∫ÂíåÂéüÁ±ª<strong>*<em>Âêå‰∏™ </em>dex<em> ‰∏ãÁöÑ‰∏Ä‰∏™‰ªªÊÑèÁ±ªÂç≥ÂèØ„ÄÇ‰ΩÜÊòØÈúÄË¶ÅË∞ÉÁî® </em>dvmFindLoadedClass<em> Êù•ÂÆûÁé∞ÔºåÂú®Ë°•‰∏ÅÊ≥®ÂÖ•‰πãÂêéÔºåÂú®ÊØè‰∏™ </em>dex<em> ‰∏≠Êâæ‰∏Ä‰∏™Â∑≤ÁªèÊàêÂäüÂä†ËΩΩÁöÑÂºïÁî®Á±ªÁöÑÊèèËø∞Á¨¶‰Ωú‰∏∫ÂèÇÊï∞Êù•ÂÆûÁé∞„ÄÇÊØîÂ¶Ç‰∏ª dex Â∞±Áî® </em>Application* Á±ªÊèèËø∞Á¨¶„ÄÇÂÖ∂‰ªñ dexÔºå</strong>ÊâãQ*<em>Á°Æ‰øù‰∫ÜÊØè‰∏Ä‰∏™‰ªΩ </em>dex* Êúâ‰∏Ä‰∏™Á©∫Á±ªÂÆåÊàêÂàùÂßãÂåñÔºå‰ΩøÁî®ÁöÑÊòØÁ©∫Á±ªÁöÑÊèèËø∞Á¨¶„ÄÇ</li>
<li><em>classIdx</em> ‰∏∫ÂéüÁ±ª <strong>A</strong> Âú®ÊâÄ <em>dex</em> ‰∏ãÁöÑÁ±ªÁ¥¢Âºï IDÔºåÈÄöËøá<strong>dexdump -h</strong>Êåá‰ª§Ëé∑Âèñ„ÄÇ</li>
</ul>
<p>ËøôÂ•óÊñπÊ°àÂèØÂÆåÁæéÈÅøÂºÄÊèíÊ°©ÊâÄÂ∏¶Êù•ÁöÑÁ±ªÊ†°È™åÂΩ±ÂìçÔºå‰ΩÜÂÅáÂ¶ÇÂú®Êüê‰∏™ÂæÖ‰øÆÂ§çÂ§öÊÄÅÁ±ª‰∏≠Êñ∞Â¢ûÊñπÊ≥ïÔºåÂèØËÉΩ‰ºöÂØºËá¥‰øÆÂ§çÂâçÁ±ªÁöÑ <em>vtable</em> ÁöÑÁ¥¢Âºï‰∏é‰øÆÂ§çÂêéÁ±ªÁöÑ <em>vtable</em> Á¥¢ÂºïÂØπ‰∏ç‰∏ä„ÄÇÂõ†Ê≠§‰øÆÂ§çÂêéÁöÑÁ±ª‰∏çËÉΩÊñ∞Â¢û <em>public</em> ÂáΩÊï∞ÔºåÂêåÊ†∑<strong>QZone</strong>‰πüÂ≠òÂú®ËøôÊ†∑ÁöÑÈóÆÈ¢ò„ÄÇÊâÄ‰ª•Âè™ËÉΩÂØªÊâæÂÖ®ÈáèÂêàÊàêÊñ∞ <strong>dex</strong>Êñá‰ª∂ÁöÑÊñπÊ°à„ÄÇ</p>
<h3 id="TinkerÊñπÊ°à"><a href="#TinkerÊñπÊ°à" class="headerlink" title="TinkerÊñπÊ°à"></a>TinkerÊñπÊ°à</h3><p><strong>tinker</strong>ÊñπÊ°àÊòØÂÖ®ÈáèÊõøÊç¢ DEX Êñá‰ª∂„ÄÇ</p>
<p>‰ΩøÁî®Ëá™Á†îÁÆóÊ≥ïÈÄöËøáËÆ°ÁÆóÈáçÊñ∞ÁîüÊàêÊñ∞ÁöÑ<strong>DEXÊñá‰ª∂</strong>‰∏éÂæÖ‰øÆÂ§çÁöÑ<strong>DEXÊñá‰ª∂</strong>Â∑ÆÂºÇËøõËÄåÂæóÂà∞Êñ∞ÁöÑ<strong>DEXÊñá‰ª∂</strong>ÔºåËØ•<strong>DEXÊñá‰ª∂</strong>Êñá‰ª∂Ë¢´‰∏ãÂèëÂà∞ÂÆ¢Êà∑Á´Ø‰∏éÂæÖ‰øÆÂ§çÁöÑ<strong>DEXÊñá‰ª∂</strong>ÈáçÊñ∞ËøõË°åÂêàÂπ∂ÁîüÊàêÊñ∞ÁöÑÂÖ®Èáè<strong>DEXÊñá‰ª∂</strong>ÔºåÂπ∂ÊääÂÖ∂Âä†ËΩΩÂêéÊèíÂà∞ <em>dexElements</em> Êï∞ÁªÑÁöÑÊúÄÂâçÈù¢„ÄÇ</p>
<p>‰∏é<strong>QZone</strong>ÊñπÊ°à‰∏ç‰∏ÄÊ†∑ÁöÑÊòØÔºåÁî±‰∫éË¢´‰øÆÂ§çÁöÑÁ±ª‰∏éÂéüÁ±ªÊòØÂú®Âêå‰∏Ä‰∏™<strong>DEXÊñá‰ª∂</strong>ÔºåÊâÄ‰ª•‰∏çÂ≠òÂú®Á±ªÊ†°È™åÈóÆÈ¢ò„ÄÇ</p>
<p>Áî±‰∫é‰∏çÂêå Android ËôöÊãüÊú∫‰∏ãÈááÁî®‰∏çÂêåÁöÑ DEX Âä†ËΩΩÈÄªËæëÔºåÊâÄ‰ª•Âú®Â§ÑÁêÜÂÖ®Èáè DEX Êó∂‰πüÊúâÂ∑ÆÂºÇ„ÄÇ</p>
<p>ÊØîÂ¶Ç<strong>DalvikËôöÊãüÊú∫</strong> Ë∞ÉÁî® <a href="https://android.googlesource.com/platform/dalvik/+/android-4.4.4_r2/vm/native/dalvik_system_DexFile.cpp" title="Dalvik_dalvik_system_DexFile_openDexFileNative" target="_blank" rel="noopener">Dalvik_dalvik_system_DexFile_openDexFileNative</a>Êù•Âä†ËΩΩ DEX Êñá‰ª∂ÔºåÂ¶ÇÊûúÊòØ‰∏Ä‰∏™ÂéãÁº©ÂåÖÂàôÂè™‰ºöÂä†ËΩΩÁ¨¨‰∏Ä‰∏™ DEX Êñá‰ª∂„ÄÇËÄå<strong>artËôöÊãüÊú∫</strong> ÂàôÊòØË∞ÉÁî® <a href="https://android.googlesource.com/platform/art/+/master/runtime/oat_file_assistant.cc" title="LoadDexFiles" target="_blank" rel="noopener">LoadDexFiles</a>, Âä†ËΩΩÁöÑÊòØ <em>oat</em> ‰∏≠Â§ö‰∏™ DEX Êñá‰ª∂„ÄÇ</p>
<p>Âú®<strong>ArtËôöÊãüÊú∫</strong>Âä†ËΩΩÁöÑÂéãÁº©ÂåÖ‰∏ãÔºåÂèØËÉΩÂ≠òÂú®Â§ö‰∏™<strong>DEXÊñá‰ª∂</strong>Ôºåmain dex‰∏∫<strong>classes.dex</strong>ÔºåÂÖ∂‰ªñÁöÑ<strong>DEXÊñá‰ª∂</strong>‰æùÊ¨°ÂëΩÂêç‰∏∫ <em>classes(2,3,4‚Ä¶)dex</em>„ÄÇÂÅáÂ¶ÇÊüê‰∏™<strong>classesNdex</strong>Âá∫Áé∞‰∫ÜÈóÆÈ¢òÔºåtinker ‰ºöÈáçÊñ∞ÂêàÊàê <strong>classesNdex</strong> „ÄÇ‰øÆÂ§çÊµÅÁ®ã‰∏∫Ôºö</p>
<ol>
<li>‰øùÁïôÂéüÊù•‰øÆÂ§çÂâç<strong>classesNdex</strong>Dex Êñá‰ª∂</li>
<li>Ëé∑Âèñ‰øÆÂ§çÂêéÁöÑ<strong>classedNdexFix</strong>dex Êñá‰ª∂</li>
<li>‰ΩøÁî®ÁÆóÊ≥ïËÆ°ÁÆóÂæóÂà∞<strong>classesNdexPatch</strong>Ë°•‰∏ÅÊñá‰ª∂</li>
<li>‰∏ãÂèë<strong>classesNdexPatch</strong>Ë°•‰∏ÅÊñá‰ª∂Âú®ÂÆ¢Êà∑Á´Ø‰∏é<strong>classesNdex</strong>DEX Êñá‰ª∂ËøõË°åÂêàÂπ∂ÔºåÂæóÂà∞<strong>classedNdexFix</strong>Dex Êñá‰ª∂</li>
<li>ÈáçÂêØÂ∫îÁî®ÔºåÊèêÂâçÂä†ËΩΩ<strong>classedNdexFix</strong>Dex Êñá‰ª∂‰øÆÂ§çÈóÆÈ¢ò„ÄÇ</li>
</ol>
<p>ËøôÁßçÂÖ®ÈáèÂêàÊàê‰øÆÂ§ç <strong>DEXÊñá‰ª∂</strong> ÁöÑÂÅöÊ≥ïÔºåÁ°Æ‰øù‰∫ÜÂ§çÂâçÂêéÁöÑÁ±ªÂú®Âêå‰∏Ä‰∏™<strong>DEXÊñá‰ª∂</strong>‰∏≠ÔºåÈÅµÂæ™ÂéüÊù•ËôöÊãüÊú∫ÊâÄÊúâÊ†°È™åÊñπÂºèÔºåÈÅøÂºÄ‰∫Ü<strong>QZoneÊñπÊ°à</strong>Èù¢‰∏¥ÁöÑÁ±ªÊ†°È™åÈóÆÈ¢ò„ÄÇ</p>
<h3 id="SophixÊñπÊ°à"><a href="#SophixÊñπÊ°à" class="headerlink" title="SophixÊñπÊ°à"></a>SophixÊñπÊ°à</h3><p>ÈòøÈáå<strong>Sophix</strong>ÊñπÊ°àËÆ§‰∏∫</p>
<blockquote>
<p>Êó¢ÁÑ∂ art ËÉΩÂä†ËΩΩÂéãÁº©Êñá‰ª∂‰∏≠ÁöÑÂ§ö‰∏™ dex ‰∏î‰ºòÂÖàÂä†ËΩΩ classes.dexÔºåÂ¶ÇÊûúÊääË°•‰∏Å dex ‰Ωú‰∏∫ classes.dexÔºåÁÑ∂Âêé apk ‰∏≠ÂéüÊù•ÁöÑ dex ÊîπÊàê classes(2,3,4‚Ä¶)dexÔºåÁÑ∂ÂêéÈáçÊñ∞ÊâìÂåÖÂéãÁº©Êñá‰ª∂ÔºåËÆ© DexFile.loadDex ÂæóÂà∞ DexFile ÂØπË±°ÔºåÂπ∂ÊúÄÁªàÊõøÊç¢ÊéâÊóßÁöÑ dexElements Êï∞ÁªÑÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ</p>
</blockquote>
<p>‰ΩÜÊòØËøôÁßçÊñπÊ°à‰∏ãÔºå<strong>ArtËôöÊãüÊú∫</strong>ÈúÄË¶ÅÈáçÊñ∞Âä†ËΩΩÊï¥‰∏™ÂéãÁº©Êñá‰ª∂ÔºåÈíàÂØπÊØè‰∏Ä‰∏™ dex ÊâßË°å dexoat Êù•ÂæóÂà∞ odex ÁöÑËøáÁ®ãÊòØÂæàËÄóÊó∂ÁöÑ„ÄÇÈúÄË¶ÅÊääÊï¥‰∏™ËøáÁ®ã‰∫ãÂä°ÂåñÔºåÂú®Êé•Êî∂Âà∞ÊúçÂä°Á´ØË°•‰∏Å‰πãÂêéÂÜçÂêØÂä®‰∏Ä‰∏™Â≠êÁ∫øÁ®ãÂú®ÂêéÂè∞ËøõË°åÂºÇÊ≠•Â§ÑÁêÜ„ÄÇÂ¶ÇÊûú‰∏ãÊ¨°ÈáçÂêØ‰πãÂêéÂèëÁé∞Â≠òÂú®Â§ÑÁêÜÂÆåÁöÑÂÆåÊï¥ odex Êñá‰ª∂ÈõÜÔºåÊâçËøõË°åÂ§ÑÁêÜ„ÄÇ</p>
<p>ÂêåÊó∂ËÆ§‰∏∫</p>
<blockquote>
<p>ÈíàÂØπ dalvik ‰∏ãÔºåÂÖ®ÈáèÂêàÊàê dex ÂèØÂèÇÁÖß multi-dex ÊñπÊ°àÔºåÂú®ÂéüÊù• dex Êñá‰ª∂‰∏≠ÂâîÈô§ÈúÄË¶Å‰øÆÂ§çÁöÑÁ±ªÔºåÁÑ∂ÂêéÂÜçÂêàÂπ∂Ëøõ‰øÆÂ§çÁöÑÁ±ª„ÄÇÂπ∂‰∏çÈúÄË¶ÅÂÉè tinker ÊñπÊ°à‰∏≠ÈíàÂØπ dex ÁöÑÊâÄÊúâÂÜÖÂÆπËøõË°åÊØîËæÉÔºåÁ≤íÂ∫¶ÈùûÂ∏∏ÁªÜ‰πüÈùûÂ∏∏Â§çÊùÇÔºå‰ª•Á±ª‰Ωú‰∏∫Á≤íÂ∫¶‰Ωú‰∏∫ÊõøÊç¢ÊòØËæÉ‰Ω≥ÈÄâÊã©„ÄÇ</p>
</blockquote>
<p>‰ΩÜÊòØÂ¶ÇÊûú <em>Application</em> Âä†ËΩΩ‰∫ÜÊñ∞ dex ÁöÑÁ±ª <em>Application</em> ÂàöÂ•ΩË¢´Êâì‰∏ä <strong>CLASS_ISPREVERIFIED</strong> ÔºåÈÇ£‰πàÂ∞±‰ºöÈù¢‰∏¥ÂâçÈù¢ QZone ÊñπÊ°àÁöÑÁ±ªÊ†°È™åÈóÆÈ¢òÔºåÂÆûÈôÖ‰∏äÊâÄÊúâÂÖ®ÈáèÂêàÊàêÁöÑÊñπÊ°àÈÉΩ‰ºöÈù¢‰∏¥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ <strong>tinker</strong> ‰ΩøÁî®ÁöÑÊòØ <strong>TinkerApplication</strong> Êé•ÁÆ°Â∫îÁî® <strong>Application</strong> Âπ∂Âú®ÁîüÂëΩÂë®ÊúüÂõûË∞ÉÁöÑÊó∂ÂÄôÂèçÂ∞ÑË∞ÉÁî®Âéü <strong>Application</strong> ÁöÑÂØπÂ∫îÊñπÊ°à„ÄÇËÄå <strong>Sophix</strong> ‰πüÊòØ‰ΩøÁî® <em>SohpixStubApplication</em> ÂÅö‰∫ÜÁ±ª‰ººÁöÑ‰∫ãÊÉÖ„ÄÇ</p>
<p><strong>Â∞èÁªì‰∏ÄÊ≥¢</strong></p>
<p>Áî±‰∫éÊ∂âÂèäÁöÑÊäÄÊúØÈùûÂ∏∏Â§öÔºåÁªÜËá¥ÁöÑÂÆûÁé∞ÂèØÂèÇËÄÉÂÖ∂ÂêÑÊ°ÜÊû∂ÊñπÊ°àÁöÑÂºÄÊ∫ê‰ª£Á†ÅÔºåÈáçÁÇπ‰∫ÜËß£Â§ßËá¥ÊµÅÁ®ã„ÄÇÂÜ∑ÂêØÂä®ÊñπÊ°àÂá†‰πéÂèØ‰ª•‰øÆÂ§ç‰ªª‰Ωï‰ª£Á†ÅÂú∫ÊôØÔºå‰ΩÜÊòØË°•‰∏ÅÊ≥®ÂÖ•ÂâçÂ∑≤ÁªèË¢´Âä†ËΩΩÁöÑÁ±ªÔºåÂ¶Ç <em>Application</em> Á≠âÊòØÊó†Ê≥ïË¢´‰øÆÂ§çÁöÑ„ÄÇÁªºÂêà‰∏äÈù¢ÁöÑÂ§öÁßçÊñπÊ°àÂèØ‰ª•ÂæóÂà∞ÈíàÂØπ‰∏çÂêåËôöÊãüÊú∫ÁöÑ‰ºòÂÖàÂÜ∑ÂêØÂä®ÊñπÊ°àÔºö</p>
<ul>
<li>Dalvik ËôöÊãüÊú∫‰∏ã‰ΩøÁî®Á±ª <strong>multi-dex</strong> ÂÖ®ÈáèÊñπÊ°àÈÅøÂÖçÊèíÊ°©ÁöÑÊñπÊ°à</li>
<li>Art ËôöÊãüÊú∫‰∏ã‰ΩøÁî®Ë°•‰∏ÅÁ±ª‰Ωú‰∏∫ <strong>classes.dex</strong> ÈáçÊñ∞ÊâìÂåÖÂéãÁº©Êñá‰ª∂ËøõË°åÂä†ËΩΩÁöÑÊñπÊ°à</li>
</ul>
<h3 id="Á±ªÁÉ≠Êõ¥Êñ∞"><a href="#Á±ªÁÉ≠Êõ¥Êñ∞" class="headerlink" title="Á±ªÁÉ≠Êõ¥Êñ∞"></a>Á±ªÁÉ≠Êõ¥Êñ∞</h3><p><strong>Á±ªÁÉ≠Êõ¥Êñ∞</strong>ÊåáÁöÑÊòØÂú®‰∏çÈúÄË¶ÅÈáçÂêØÂ∫îÁî®ÁöÑÂâçÊèê‰∏ã‰øÆÂ§çÁ±ªÁöÑÂ∑≤Áü•ÈóÆÈ¢ò„ÄÇ</p>
<p>Â¶ÇÊûú‰∏Ä‰∏™Á±ªÂ∑≤Ë¢´ËôöÊãüÊú∫ÊâÄÂä†ËΩΩÂêéË¶Å‰øÆÊ≠£ËØ•Á±ªÁöÑÊüê‰∫õÊñπÊ≥ïÔºåÂè™ËÉΩÈÄöËøáÂÆûÁé∞<strong>Á±ªÁÉ≠Êõ¥Êñ∞</strong>Êù•ÂÆûÁé∞ÔºöÂú® navite Â±ÇÊõøÊç¢Âà∞ÂØπÂ∫îË¢´ËôöÊãüÊú∫Âä†ËΩΩËøáÁöÑÁ±ªÁöÑÊñπÊ≥ï„ÄÇ</p>
<p>‰ª•ÈòøÈáå<strong>ÂºÄÊ∫êÈ°πÁõÆAndfix</strong>Âèä<strong>Sophix</strong>ÊñπÊ°à‰∏∫ÂàÜÊûê„ÄÇ</p>
<ol>
<li><strong><a href="https://github.com/alibaba/AndFix/blob/master/src/com/alipay/euler/andfix/AndFix.java" title="AndFix#replaceMethod(Method src,Method dest)" target="_blank" rel="noopener">AndFix#replaceMethod(Method src,Method dest)</a></strong> ‰∏∫ Java Â±ÇÊõøÊç¢ÈîôËØØÊñπÊ≥ïÁöÑÂÖ•Âè£ÔºåÈÄöËøá JNI Ë∞ÉÁî® Navite Â±Ç‰ª£Á†Å</li>
<li><strong><a href="https://github.com/alibaba/AndFix/blob/master/jni/andfix.cpp" title="andifx#replaceMethod" target="_blank" rel="noopener">andifx#replaceMethod</a></strong> ‰∏∫ Navite Â±ÇË¢´‰∏äÂ±ÇÊâÄË∞ÉÁî®ÁöÑ‰ª£Á†Å,ÂØπËôöÊãüÊú∫ÂÜÖÁöÑÊñπÊ≥ïËøõË°å ‚ÄùÊõøÊç¢‚Äú</li>
</ol>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">static void replaceMethod(<span class="keyword">JNIEnv* </span>env, <span class="keyword">jclass </span>clazz, <span class="keyword">jobject </span>src,<span class="keyword">jobject </span>dest) &#123;</span><br><span class="line">  if (isArt) &#123;</span><br><span class="line">    art_replaceMethod(env, src, dest)<span class="comment">;</span></span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    dalvik_replaceMethod(env, src, dest)<span class="comment">;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>‰ª£Á†ÅÂå∫ÂàÜ‰∫Ü<strong>DalviËôöÊãüÊú∫</strong>Âíå<strong>ArtËôöÊãüÊú∫</strong>ÁöÑ‰∏çÂêåÂÆûÁé∞„ÄÇ</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">extern void __attribute__ ((visibility (<span class="string">"hidden"</span>))) art_replaceMethod(JNIEnv* <span class="keyword">env</span>, jobject src, jobject dest) &#123;</span><br><span class="line">    <span class="keyword">if</span> (apilevel &gt; <span class="number">23</span>) &#123;</span><br><span class="line">        replace_7_0(<span class="keyword">env</span>, src, dest);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (apilevel &gt; <span class="number">22</span>) &#123;</span><br><span class="line">    replace_6_0(<span class="keyword">env</span>, src, dest);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (apilevel &gt; <span class="number">21</span>) &#123;</span><br><span class="line">    replace_5_1(<span class="keyword">env</span>, src, dest);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (apilevel &gt; <span class="number">19</span>) &#123;</span><br><span class="line">    replace_5_0(<span class="keyword">env</span>, src, dest);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        replace_4_4(<span class="keyword">env</span>, src, dest);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>‰ΩÜÊòØ‰∏çÂêåËôöÊãüÊú∫ÁâàÊú¨ÔºåÁî±‰∫éËôöÊãüÊú∫Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÂπ∂‰∏çÁõ∏ÂêåÔºåÊâÄ‰ª•ËøòËøõ‰∏ÄÊ≠•ÈíàÂØπ‰∏çÂêå Android ÁâàÊú¨ÂÜçÂÅöÂå∫ÂàÜ„ÄÇ</p>
<p>ËøôÂ∞±Â§¥Â§ß‰∫ÜÂïä„ÄÇËøôÈáå‰ª• 6.0 ÁâàÊú¨ÁöÑ<strong>ArtËôöÊãüÊú∫</strong>ÁöÑÊõøÊç¢ÊµÅÁ®ãÁÆÄÂçïËÆ≤‰∏Ä‰∏ã„ÄÇ</p>
<p>ÊØè‰∏Ä‰∏™ Java ÊñπÊ≥ïÂú®<strong>ArtËôöÊãüÊú∫</strong>ÂÜÖÈÉΩÂØπÂ∫î‰∏Ä‰∏™ <a href="https://android.googlesource.com/platform/art/+/refs/heads/nougat-release/runtime/art_method.h" title="art_method" target="_blank" rel="noopener">art_method</a> ÁªìÊûÑÔºåÁî®‰∫éËÆ∞ÂΩï Java ÊñπÊ≥ïÁöÑÊâÄÊúâ‰ø°ÊÅØÔºåÂåÖÊã¨ÂΩíÂ±ûÁ±ªÔºåËÆøÈóÆÊùÉÈôêÔºå‰ª£Á†ÅÊâßË°åÂú∞ÂùÄÁ≠â„ÄÇÁÑ∂ÂêéÂØπËøô‰∫õ‰ø°ÊÅØËøõË°åÈÄê‰∏ÄÊõøÊç¢ÔºåÊõøÊç¢ÂÆå‰πãÂêéÂÜçÊ¨°Ë∞ÉÁî®ÊõøÊç¢ÊñπÊ≥ïÂ∞±ÂèØÁõ¥Êé•Ëµ∞Êñ∞ÊñπÊ≥ïÈÄªËæë„ÄÇ</p>
<p>ÂΩì Java Code Ë¢´ÁºñËØëÂ§ÑÁêÜÊàê Dex Code ‰πãÂêéÔºå<strong>ArtËôöÊãüÊú∫</strong> Âä†ËΩΩÂπ∂ÂèØÈÄöËøáËß£ÈáäÊ®°ÂºèÊàñËÄÖ AOT Ê®°ÂºèÊâßË°å„ÄÇË¶ÅÂú®ÁÉ≠Êõ¥‰πãÂêéË∞ÉÁî®Êñ∞ÊñπÊ≥ïÂ∞±ÂæóÊõøÊç¢ÊñπÊ≥ïÊâßË°åÂÖ•Âè£„ÄÇ</p>
<p>Ëß£ÈáäÊ®°Âºè‰∏ãÈÄöËøáËé∑Âèñ <a href="https://android.googlesource.com/platform/art/+/refs/heads/nougat-release/runtime/art_method.h" title="art_method.entry_point_from_jni_" target="_blank" rel="noopener">art_method.entry_point_from_jni_</a> ÊñπÊ≥ïËé∑ÂèñÊâßË°åÂÖ•Âè£ÔºåËÄå AOT Ê®°ÂºèÊ®°ÂºèÂàôË∞ÉÁî® <a href="https://android.googlesource.com/platform/art/+/refs/heads/nougat-release/runtime/art_method.h" title="art_method.entry_point_from_jni_" target="_blank" rel="noopener">art_method.entry_point_from_jni_</a> Ëé∑Âèñ„ÄÇ</p>
<p>Èô§‰∫ÜËé∑ÂèñÊâßË°åÂÖ•Âè£ÊõøÊç¢Â§ñÔºåËøòÈúÄË¶Å‰øùËØÅÊñπÊ°à‰ΩøÁî®ÁöÑ <a href="https://github.com/alibaba/AndFix/blob/master/jni/art/art_method_replace_6_0.cpp" title="art_method_replace_6_0#replace_6_0" target="_blank" rel="noopener">art_method_replace_6_0#replace_6_0</a> Êï∞ÊçÆÁªìÊûÑ‰∏éÂÆâÂçìÊ∫êÁ†Å <a href="https://android.googlesource.com/platform/art/+/refs/heads/nougat-release/runtime/art_method.h" title="art_method" target="_blank" rel="noopener">art_method</a> Êï∞ÊçÆÁªìÊûÑÂÆåÂÖ®‰∏ÄËá¥ÊâçÂèØ‰ª•„ÄÇ‰ΩÜÁî±‰∫éÂêÑÁßçÂéÇÂïÜÂ≠òÂú®ÂØπ ROM ËøõË°åÈ≠îÊîπÔºåÈöæ‰ª•‰øùËØÅËÉΩÂ§ü‰øÆÂ§çÊàêÂäü„ÄÇ</p>
<p>ÈíàÂØπ‰∏äËø∞ÂÖºÂÆπÈóÆÈ¢òÔºå<strong>Sophix</strong>Êé¢Á¥¢Âá∫‰∫Ü‰∏ÄÁßçÁ™ÅÁ†¥Â∫ïÂ±ÇÁªìÊûÑÂ∑ÆÂºÇÁöÑÊñπÊ≥ï„ÄÇ</p>
<p>ËøôÁßçÊñπÊ≥ïÊää‰∏Ä‰∏™<a href="https://android.googlesource.com/platform/art/+/refs/heads/nougat-release/runtime/art_method.h" title="art_method" target="_blank" rel="noopener">art_method</a> ÁúãÊàê‰∫Ü‰∏Ä‰∏™Êï¥‰ΩìËøõË°åÊõøÊç¢ËÄå‰∏çÂøÖÈíàÂØπÊØè‰∏™ÁâàÊú¨ <em>ArtMethod</em> ‰∏•Ê†ºÊéßÂà∂ÂÜÖÂÆπ„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂè™Ë¶ÅÁü•ÈÅìÂΩìÂâçËÆæÂ§á <em>art_method</em> ÁöÑÈïøÂ∫¶ÔºåÂ∞±ÂèØ‰ª•ÊääÊï¥‰∏™ÁªìÊûÑ‰ΩìÂÆåÂÖ®ÊõøÊç¢Êéâ„ÄÇ</p>
<p>Áî±‰∫é ArtMethod ÊòØÁ¥ßÂØÜÊéíÂàóÁöÑÔºåÊâÄ‰ª•Áõ∏ÈÇª‰∏§‰∏™ ArtMethod ÁöÑËµ∑ÂßãÂú∞ÂùÄÂ∑ÆÂÄºÂ∞±ÊòØ ArtMethod ÁöÑÂ§ßÂ∞è„ÄÇÈÄöËøáÂÆö‰πâ‰∏Ä‰∏™ÁÆÄÂçïÁ±ª <em>NativeMethodCal</em> Êù•Ê®°ÊãüËÆ°ÁÆó„ÄÇ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NativeMethodCal</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">final</span> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">f1</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">final</span> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">f2</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line">  </span><br><span class="line">‰∏§‰∏™ÊñπÊ≥ïÂ±û‰∫é**<span class="keyword">static</span>**ÊñπÊ≥ï ‰∏îËØ•Á±ªÂè™ÊúâËøô‰∏§‰∏™ÊñπÊ≥ïÔºåÊâÄ‰ª•ÂøÖÂÆöÁõ∏ÈÇª,Native Â±ÇÁöÑÊõøÊç¢ÂèØ‰∏∫</span><br></pre></td></tr></table></figure>
<p>void replacee(JNIEnv* env, jobject src, jobject dest) {<br>  size_t firMid = (size_t) env-&gt;GetStaticMethodID(nativeMethodCalClazz,‚Äùf1‚Äù,‚Äù()V‚Äù);<br>  size_t secMid = (size_t) env-&gt;GetStaticMethodID(nativeMethodCalClazz,‚Äùf2‚Äù,‚Äù()V‚Äù);<br>  size_t methodSize = secMid - firMid<br>  memcpy(smeth,dmeth, methodSize);<br>}<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">*<span class="strong">*Â∞èÁªì‰∏ÄÊ≥¢*</span><span class="strong">*</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">‰∫ÜËß£‰∫Ü‰∏§ÁßçÊñπÊ°àÂú® Native Â±ÇÁöÑÁ±ªÁÉ≠Êõ¥ÊÄùË∑ØÂèä‰ΩúÁî®Ôºå‰ΩÜËøô‰∏§ÁßçÊñπÊ°à‰πüÂ≠òÂú®‰∏Ä‰∫õÈôêÂà∂‰∏éÈóÆÈ¢òÔºö</span></span><br><span class="line"><span class="strong">1. ÈíàÂØπÂèçÂ∞ÑË∞ÉÁî®ÈùûÈùôÊÄÅÊñπÊ≥ï‰∫ßÁîüÁöÑÈóÆÈ¢ò„ÄÇËøôÁ±ªÈóÆÈ¢òÂè™ËÉΩÈÄöËøáÂÜ∑ÂêØÂä®‰øÆÂ§çÔºåÂéüÂõ†ÊòØÂèçÂ∞ÑË∞ÉÁî®ÁöÑ *</span>invoke* Â∫ïÂ±ÇÂõûË∞ÉÁî®Âà∞ <span class="strong">*InvokeMethod*</span>,ËØ•ÊñπÊ≥ï‰ºöÊ†°È™åÂèçÂ∞ÑÁöÑÂØπË±°ÂíåÊòØ‰∏çÊòØ*<span class="strong">*ArtMethod*</span><span class="strong">*ÁöÑ‰∏Ä‰∏™ÂÆû‰æãÔºå‰ΩÜÊñπÊ°àÊõøÊç¢‰∫Ü*</span><span class="strong">*ArtMethod*</span><span class="strong">*ÂØºËá¥Ê†°È™åÂ§±Ë¥•„ÄÇ</span></span><br><span class="line"><span class="strong">2. ‰∏çÈÄÇÂêàÁ±ªÂèëÁîüÁªìÊûÑÂèòÂåñÁöÑ‰øÆÊîπ„ÄÇÊØîÂ¶ÇÂ¢ûÂà†ÊñπÊ≥ïÂèØËÉΩÂºïËµ∑Á±ªÂèä Dex ÊñπÊ≥ïÊï∞ÂèòÂåñÔºåËøõËÄåÊîπÂèòÊñπÊ≥ïÁ¥¢Âºï„ÄÇÂêåÊ†∑Âú∞ÔºåÂ¢ûÂà†Â≠óÊÆµ‰πü‰ºöÊõ¥ÊîπÊñπÊ≥ïÁ¥¢Âºï„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">### ËµÑÊ∫ê‰øÆÂ§ç</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">ËµÑÊ∫ê‰øÆÂ§çÊòØÂæàÂ∏∏ËßÅÁöÑÊìç‰ΩúÔºåËµÑÊ∫ê‰øÆÂ§çÊñπÊ°àÂæàÂ§öÂèÇËÄÉ*</span><span class="strong">*InstantRun*</span><span class="strong">*ÁöÑÂÆûÁé∞Ôºå*</span><span class="strong">*InstantRun*</span><span class="strong">*ËµÑÊ∫ê‰øÆÂ§çÊ†∏ÂøÉÊµÅÁ®ãÂ§ßËá¥Â¶Ç‰∏ãÔºö</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">1. ÊûÑÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ*</span><span class="strong">*AssetManager*</span><span class="strong">*ÂØπË±°ÔºåÂπ∂Ë∞ÉÁî®*</span>addAssetPath*Ê∑ªÂä†Êñ∞ÁöÑËµÑÊ∫êÂåÖÔºõ</span><br><span class="line">2. ‰øÆÊîπÊâÄÊúâ*<span class="strong">*Activity*</span><span class="strong">*ÁöÑ *</span>Activity.mAssets(AssetManagerÂÆû‰æã)* ÁöÑÂºïÁî®ÊåáÂêëÊñ∞ÊûÑÂª∫ÁöÑ*<span class="strong">*AssetManager*</span><span class="strong">*ÂØπË±°Ôºõ</span></span><br><span class="line"><span class="strong">3. ‰øÆÊîπÊâÄÊúâ*</span><span class="strong">*Resource*</span><span class="strong">*ÁöÑ *</span>Resource.mAssets(AssetManagerÂÆû‰æã)* ÁöÑÂºïÁî®ÊåáÂêëÊñ∞ÊûÑÂª∫ÁöÑ*<span class="strong">*AssetManager*</span><span class="strong">*ÂØπË±°.</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">ÂØπ‰∫é‰ªªÊÑèÁöÑËµÑÊ∫êÂåÖÔºåË¢´ *</span>AssetManager#addAssetPath* Ê∑ªÂä†‰πãÂêéÔºåËß£Êûê*<span class="strong">*resourecs.asrc*</span><span class="strong">*Âπ∂Âú® Native Â±Ç *</span>mResources* ‰æß‰øùÂ≠òËµ∑Êù•„ÄÇÂèØÂèÇËÄÉ [AssetManager.h](https://android.googlesource.com/platform/frameworks/base/+/master/libs/androidfw/include/androidfw/AssetManager.h "AssetManager.h") ÁöÑÂÆûÁé∞„ÄÇ</span><br><span class="line"><span class="code">  </span></span><br><span class="line">ÂÆûÈôÖ‰∏ä <span class="strong">*mResources*</span> ÊòØ‰∏Ä‰∏™*<span class="strong">*ResTable*</span><span class="strong">*ÁªìÊûÑ‰ΩìÔºåÂ≠òÊîæ*</span><span class="strong">*resourecs.asrc*</span><span class="strong">*‰ø°ÊÅØÁî®ÁöÑ„ÄÇËÄå‰∏î‰∏Ä‰∏™ËøõÁ®ãÂè™‰ºöÊúâ‰∏Ä‰∏™*</span><span class="strong">*ResTable*</span><span class="strong">*„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">*</span><span class="strong">*ResTable*</span>* ÂèØÂä†ËΩΩÂ§ö‰∏™ËµÑÊ∫êÂåÖÔºå‰∏Ä‰∏™ËµÑÊ∫êÂåÖÈÉΩÂåÖÂê´‰∏Ä‰∏™*<span class="strong">*resourecs.asrc*</span>* ÔºåÊØè‰∏Ä‰∏™*<span class="strong">*resourecs.asrc*</span>* ËÆ∞ÂΩï‰∫ÜËØ•ÂåÖÁöÑÊâÄÊúâËµÑÊ∫ê‰ø°ÊÅØÔºåÊØè‰∏Ä‰∏™ËµÑÊ∫êÂØπÂ∫î‰∏Ä‰∏™*<span class="strong">*ResChunk*</span><span class="strong">*„ÄÇ</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">ÊØè‰∏Ä‰∏™*</span><span class="strong">*ResChunk*</span><span class="strong">*ÈÉΩÊúâÂîØ‰∏ÄÁöÑÁºñÂè∑ÔºåÁî±ËØ•ÁºñÂè∑Áî±‰∏âÈÉ®ÂàÜÊûÑÊàêÔºåÊØîÂ¶Ç*</span><span class="strong">*0x7f0e0000*</span><span class="strong">*ÔºåÂèØ‰ª•Èöè‰æøÊâæ‰∏Ä‰∏™ APK Ëß£ÂåÖÊü•Áúã *</span>resourecs.asrc* Êñá‰ª∂„ÄÇ</span><br><span class="line"><span class="bullet">* </span>Ââç‰∏§‰Ωç <span class="strong">*0x7f*</span> ‰∏∫ package idÔºåÁî®‰∫éÂå∫ÂàÜÊòØÂì™‰∏™ËµÑÊ∫êÂåÖ</span><br><span class="line"><span class="bullet">* </span>Êé•ÁùÄ‰∏§‰Ωç <span class="strong">*0x0e*</span> ‰∏∫ type idÔºåÁî®‰∫éÂå∫ÂàÜÊòØÂì™Á±ªÂûãËµÑÊ∫êÔºåÊØîÂ¶Ç drawableÔºåstring Á≠â</span><br><span class="line"><span class="bullet">* </span>ÊúÄÂêéÂõõ‰Ωç <span class="strong">*0x0000*</span> ‰∏∫ entry idÔºåÁî®‰∫éË°®Á§∫‰∏Ä‰∏™ËµÑÊ∫êÈ°πÔºåÁ¨¨‰∏Ä‰∏™‰∏∫ <span class="strong">*0x0000*</span>ÔºåÁ¨¨‰∫å‰∏™‰∏∫ <span class="strong">*0x0001*</span> ‰æùÊ¨°ÈÄíÂ¢û„ÄÇ</span><br><span class="line"></span><br><span class="line">&gt; ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåÁ≥ªÁªüÁöÑËµÑÊ∫êÂåÖÁöÑ package id ‰∏∫ 0x01ÔºåÊàë‰ª¨ÁöÑ apk ‰∏∫ 0x7f</span><br><span class="line"></span><br><span class="line">Âú®Â∫îÁî®ÂêØÂä®‰πãÂêéÔºå*<span class="strong">*ResourceManager*</span><span class="strong">*Âú®ÊûÑÂª∫*</span><span class="strong">*AssetManager*</span><span class="strong">*Êó∂ÂÄôÂ∞±Â∑≤ÁªèÂä†ËΩΩ‰∫Ü APK ÂåÖÁöÑËµÑÊ∫êÂíåÁ≥ªÁªüÁöÑËµÑÊ∫ê„ÄÇ</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">Ë°•‰∏Å‰∏ãÂèëÁöÑËµÑÊ∫ê *</span>packageId* ‰πü‰ºöÊòØ <span class="strong">*0x7f*</span> ÔºåÊàë‰ª¨‰ΩøÁî®Â∑≤ÊúâÁöÑ*<span class="strong">*AssetManager*</span><span class="strong">*ËøõË°åÂä†ËΩΩÔºåÂú®*</span><span class="strong">*Android L*</span><span class="strong">*ÁâàÊú¨‰πãÂêéËøô‰∫õÂÜÖÂÆπ‰ºöÁªßÁª≠ËøΩÂä†Âà∞Â∑≤ÁªèËß£ÊûêËµÑÊ∫êÁöÑÂêéÈù¢„ÄÇ</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">Áî±‰∫éÁõ∏ÂêåÁöÑ *</span>packageId* ÁöÑÂéüÂõ†ÔºåÊúâÂèØËÉΩÂú®Ëé∑ÂèñÊüê‰∏™ËµÑÊ∫êÊòØÂéü APK Â∑≤ÁªèÂ≠òÂú®ËøëËÄåÂøΩÁï•‰∫ÜË°•‰∏ÅÁöÑÊñ∞ËµÑÊ∫ê„ÄÇÊïÖ *<span class="strong">*Á±ªInstantRunÊñπÊ°à*</span><span class="strong">*Âè™Êúâ*</span><span class="strong">*AssetManager*</span><span class="strong">*Ë¢´ÂÆåÂÖ®ÊõøÊç¢ÊâçÊúâÊïà„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">ÂÅáÂ¶ÇÂÆåÊï¥ÊõøÊç¢*</span><span class="strong">*AssetManager*</span>* ÔºåÂàôÈúÄË¶ÅÂÆåÊï¥ÁöÑËµÑÊ∫êÂåÖ„ÄÇË°•‰∏ÅÂåÖÈúÄË¶ÅÈÄöËøá‰øÆÂ§çÂâçÂêéÁöÑËµÑÊ∫êÂåÖÁªèËøáÂ∑ÆÂºÇËÆ°ÁÆó‰πãÂêé‰∏ãÂèëÔºåÂÆ¢Êà∑Á´ØÊé•Êî∂Âπ∂ÂêàÊàêÂÆåÊï¥ÁöÑÊñ∞ËµÑÊ∫êÂåÖÔºåËøêË°åÊó∂ÂèØËÉΩ‰ºöËÄóË¥πËæÉÂ§öÁöÑÊó∂Èó¥ÂíåÂÜÖÂ≠ò„ÄÇ</span><br><span class="line"></span><br><span class="line">*<span class="strong">*Sophix*</span><span class="strong">*ÁªôÂá∫‰∫Ü‰∏ÄÁßçÂèØ‰ª•‰∏çÁî®ÈáçÊñ∞ÂêàÊàêËµÑÊ∫êÂåÖÁöÑÊñπÊ°àÔºåËØ•ÊñπÊ°àÂèØË¢´Â∫îÁî®Âà∞*</span><span class="strong">*Android L*</span><span class="strong">*ÂèäÂêéÁª≠ÁâàÊú¨„ÄÇ</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">ÂêåÊ†∑ÊòØÊØîËæÉÊñ∞ÊóßËµÑÊ∫êÂåÖÂæóÂà∞Ë°•‰∏ÅËµÑÊ∫êÂåÖÔºåÁÑ∂ÂêéÈÄöËøá‰øÆÊîπË°•‰∏ÅËµÑÊ∫êÂåÖÁöÑ *</span>packageId* ‰∏∫ <span class="strong">*0x66*</span> ÔºåÂπ∂Âà©Áî®Â∑≤ÊúâÁöÑ*<span class="strong">*AssetManager*</span><span class="strong">*Áõ¥Êé•‰ΩøÁî®„ÄÇËøô‰∏™Ë°•‰∏ÅËµÑÊ∫êÂåÖË¶ÅÈÅµÂæ™‰ª•‰∏ãËßÑÂàôÔºö*</span><span class="strong">*Ë°•‰∏ÅÂåÖÂè™ÂåÖÂê´Êñ∞Â¢ûÁöÑËµÑÊ∫êÔºåÂåÖÂê´Á∫ØÊñ∞Â¢ûÁöÑËµÑÊ∫êÂíå‰øÆÊîπÊóßÂåÖÁöÑËµÑÊ∫êÔºå‰∏çÂåÖÂê´ÊóßÂåÖÈúÄË¶ÅÂà†Èô§ÁöÑËµÑÊ∫ê*</span><span class="strong">*„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">*</span> Á∫ØÊñ∞Â¢ûÁöÑËµÑÊ∫êÔºå‰ª£Á†ÅÂ§ÑÁõ¥Êé•ÂºïÁî®ËØ•ËµÑÊ∫êÔºõ</span><br><span class="line"><span class="bullet">* </span>ÊóßÂåÖÈúÄË¶Å‰øÆÊîπÁöÑËµÑÊ∫êÔºåÂàôÊñ∞Â¢û‰øÆÊîπÂêéÁöÑÂØπÂ∫îËµÑÊ∫êÔºåÁÑ∂ÂêéÊää‰ª£Á†ÅÂ§ÑËµÑÊ∫êÂºïÁî®ÊåáÂêë‰øÆÊîπÂêéËµÑÊ∫êÔºõ</span><br><span class="line"><span class="bullet">* </span>ÊóßÂåÖÈúÄË¶ÅÂà†Èô§ÁöÑËµÑÊ∫êÔºåÂàô‰ª£Á†ÅÂ§Ñ‰∏çÂºïÁî®ËØ•ËµÑÊ∫êÂ∞±Â•Ω„ÄÇÔºàËôΩÁÑ∂‰ºöÂç†ÁùÄÂùëÔºâ</span><br><span class="line"></span><br><span class="line">‰ΩøÁî®Êñ∞ËµÑÊ∫êÂåÖËøõË°åÁºñËØëÔºå‰ª£Á†Å‰∏≠ÂèØËÉΩÂá∫Áé∞ËµÑÊ∫ê <span class="strong">*ID*</span> ÂÅèÁßªÔºåÈúÄ‰øÆÊ≠£‰ª£Á†ÅÂ§ÑÁöÑËµÑÊ∫êÂºïÁî®„ÄÇ</span><br><span class="line"></span><br><span class="line">‰∏æ‰∏™üå∞„ÄÇ</span><br><span class="line"><span class="code">  </span></span><br><span class="line">ÊØîÂ¶ÇÂéüÊù•Êúâ‰∏Ä‰∏™*<span class="strong">*Drawable*</span><span class="strong">*Âú®‰ª£Á†ÅÁöÑÂºïÁî®‰∏∫ *</span>0x7f0002*ÔºåÁî±‰∫éÊñ∞ËµÑÊ∫êÂåÖÊñ∞Â¢û‰∫Ü‰∏Ä‰∏™*<span class="strong">*Drawable*</span><span class="strong">*ÔºåÂØºËá¥Âéü*</span><span class="strong">*Drawable*</span><span class="strong">*Âú®‰ª£Á†ÅÁöÑÂºïÁî®‰∏∫*</span>0x7f0003*„ÄÇ</span><br><span class="line"><span class="code">  </span></span><br><span class="line">Ëøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶ÅÊää‰ª£Á†ÅÂºïÁî®Êõ¥ÊîπÂõûÂéüÊù•ÁöÑ <span class="strong">*0x7f0002*</span>„ÄÇÂõ†‰∏∫*<span class="strong">*Sophix*</span>* Âä†ËΩΩÁöÑÊòØ <span class="strong">*packageId*</span> ‰∏∫ <span class="strong">*0x66*</span> ÁöÑË°•‰∏ÅÂåÖËÄå‰∏çÊòØÈáçÊñ∞ÂêàÊàêÊñ∞ÁöÑËµÑÊ∫êÂåÖ„ÄÇÂêåÊó∂ÔºåÂØπ‰∫é‰ΩøÁî®Âà∞Ë°•‰∏ÅÂåÖÂÜÖÁöÑËµÑÊ∫êÔºåÂÖ∂ÂºïÁî®‰πüÈúÄÊîπÊàêÂØπÂ∫îË°•‰∏ÅËµÑÊ∫êÂºïÁî® <span class="strong">*0x66????*</span>Ôºà????‰∏∫ÂèØÊîπÂèòÔºâ„ÄÇ</span><br><span class="line"></span><br><span class="line">‰ΩÜÊòØËøôÁßçÂÅöÊ≥ï‰ºöÂØºËá¥ÊûÑÂª∫Ë°•‰∏ÅËµÑÊ∫êÊó∂ÈùûÂ∏∏Â§çÊùÇÔºåÈúÄË¶ÅÊáÇÂæóÂàÜÊûêÊñ∞ÊóßËµÑÊ∫êÂåÖÁöÑ*<span class="strong">*resources.asrc*</span><span class="strong">*ÂèäÂØπÁ≥ªÁªüËµÑÊ∫êÂä†ËΩΩÊµÅÁ®ãÂçÅÂàÜ‰∫ÜËß£ÊâçË°å„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">ÈíàÂØπ *</span><span class="strong">*Android KitKat*</span><span class="strong">*Âèä‰ª•‰∏ãÁâàÊú¨Ôºå‰∏∫‰∫ÜÈÅøÂÖçÂíå*</span><span class="strong">*InstantRun*</span><span class="strong">*‰∏ÄÊ†∑ÂàõÂª∫Êñ∞ÁöÑ*</span><span class="strong">*AssetManager*</span><span class="strong">*Âπ∂ÂÅöÂ§ßÈáèÂèçÂ∞Ñ‰øÆÊîπÂ∑•‰ΩúÔºåÂØπÂéü *</span><span class="strong">*AssetManager*</span>* ÂØπË±°ÊûêÊûÑÂíåÈáçÊûÑ„ÄÇ</span><br><span class="line"><span class="code">  </span></span><br><span class="line">ÂÖ∑‰ΩìÂÅöÊ≥ïÊòØËÆ© Native Â±ÇÁöÑ*<span class="strong">*AssetManager*</span><span class="strong">*ÈáäÊîæÊâÄÊúâÂ∑≤Âä†ËΩΩÁöÑÊóßËµÑÊ∫êÔºåÁÑ∂ÂêéÊää Java Â±ÇÁöÑ*</span><span class="strong">*AssetManager*</span><span class="strong">*ÂØπÂÖ∂ÁöÑÂºïÁî®ËÆæÁΩÆ‰∏∫ *</span>null*„ÄÇÂêåÊó∂ Java Â±ÇÁöÑ*<span class="strong">*AssetManager*</span><span class="strong">*ÈáçÊñ∞Ë∞ÉÁî® *</span>init* ÊñπÊ≥ïÈ©±Âä® Native ÂàõÂª∫‰∏Ä‰∏™Ê≤°ÊúâÂä†ËΩΩËøáËµÑÊ∫êÁöÑ *<span class="strong">*AssetManager*</span><span class="strong">*„ÄÇ</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">ËøôÊ†∑‰∏ÄÊù•Ôºåjava Â±Ç‰∏äÂ±Ç‰ª£Á†ÅÂØπ*</span><span class="strong">*AssetManager*</span><span class="strong">*ÂºïÁî®Â∞±‰∏çÈúÄË¶Å‰øÆÊîπ‰∫ÜÔºåÁÑ∂ÂêéÂú®ÂØπÂÖ∂Ë∞ÉÁî® *</span>AddAssetPath* Ê∑ªÂä†ÊâÄÊúâËµÑÊ∫êÂåÖÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ</span><br><span class="line"></span><br><span class="line">*<span class="strong">*Â∞èÁªì‰∏ÄÊ≥¢*</span><span class="strong">*</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">ËµÑÊ∫ê‰øÆÂ§çÊï¥‰ΩìÊòØÂõ¥Áªï*</span><span class="strong">*AssetManager*</span><span class="strong">*Â±ïÂºÄÔºåÊú¨Êñá‰πüÂè™ÊòØËÆ∞ÂΩï‰∫ÜÂ§ß‰ΩìÁöÑÊÄùË∑ØÔºåÂ≠¶‰π†‰∏Ä‰∏ãËëóÂêçÊ°ÜÊû∂ÁöÑËÆæËÆ°ÊÄùË∑ØÂèäËß£ÂÜ≥ÈóÆÈ¢òÊñπÊ≥ï„ÄÇ‰∏≠Èó¥ÁªÜËäÇËá™ÁÑ∂Â≠òÊúâ‰∏Ä‰∫õÈöæÁÇπÂÖºÂÆπÁÇπÈúÄË¢´ÊîªÂÖãÔºåÊÑüÂÖ¥Ë∂£ÂèØÊü•ÁúãÊñáÁ´†Êú´Á´ØÂèÇËÄÉËµÑÊñô‰∏≠ÁöÑ‰π¶Á±ç„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">### SO‰øÆÂ§ç</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">Ë¶ÅÁêÜËß£ so Â¶Ç‰ΩïË¢´‰øÆÂ§çÂæóÂÖà‰∫ÜËß£Á≥ªÁªüÂ¶Ç‰ΩïÂä†ËΩΩ so Â∫ì„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">ÂÆâÂçìÊúâ‰∏§ÁßçÂä†ËΩΩ so Â∫ìÁöÑÊñπÊ≥ï„ÄÇ</span></span><br><span class="line"><span class="strong">1. Ë∞ÉÁî® *</span>System.loadLibrary* ÊñπÊ≥ïÔºåÊé•Êî∂‰∏Ä‰∏™ so ÁöÑÂêçÁß∞‰Ωú‰∏∫ÂèÇÊï∞ËøõË°åÂä†ËΩΩ„ÄÇÂØπ‰∫é APK ËÄåË®ÄÔºåÂÖ∂*<span class="strong">*libs*</span><span class="strong">*ÁõÆÂΩï‰∏ãÁöÑ so Êñá‰ª∂‰ºöË¢´Â§çÂà∂Âà∞Â∫îÁî®ÂÆâË£ÖÁõÆÂΩïÂπ∂ÂÆåÊàêÂä†ËΩΩÔºõ</span></span><br><span class="line"><span class="strong">2. Ë∞ÉÁî® *</span>System.load ÊñπÊ≥ï* ÊñπÊ≥ïÔºåÊé•Êî∂‰∏Ä‰∏™ so ÁöÑÂÆåÊï¥Ë∑ØÂæÑ‰Ωú‰∏∫ÂèÇÊï∞ËøõË°åÂä†ËΩΩ„ÄÇ</span><br><span class="line"></span><br><span class="line">Á≥ªÁªüÂä†ËΩΩÂÆå so Â∫ì‰πãÂêéÈúÄË¶ÅËøõË°åÊ≥®ÂÜåÔºåÊ≥®ÂÜå‰πüÂàÜ*<span class="strong">*ÈùôÊÄÅÊ≥®ÂÜå*</span><span class="strong">*Âíå*</span><span class="strong">*Âä®ÊÄÅÊ≥®ÂÜå*</span>* </span><br><span class="line"></span><br><span class="line">*<span class="strong">*ÈùôÊÄÅÊ≥®ÂÜå*</span><span class="strong">*‰ΩøÁî® *</span>Java<span class="emphasis">_&#123;Á±ªÂÆåÊï¥Ë∑ØÂæÑ&#125;_</span>&#123;ÊñπÊ≥ïÂêç&#125;* ‰Ωú‰∏∫ native ÁöÑÊñπÊ≥ïÂêç„ÄÇÂΩì so Â∑≤ÁªèË¢´Âä†ËΩΩ‰πãÂêéÔºånative ÊñπÊ≥ïÂú®Á¨¨‰∏ÄÊ¨°Ë¢´ÊâßË°åÊó∂ÂÄôÂ∞±‰ºöÂÆåÊàêÊ≥®ÂÜå„ÄÇ</span><br></pre></td></tr></table></figure></p>
<p>public class Test{<br>  public static native String test();<br>}<br>extern ‚ÄúC‚Äù jstring Java_com_effective_android_test(JNIEnv *env,jclass clazz)<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="strong">**Âä®ÊÄÅÊ≥®ÂÜå**</span>ÂÄüÂä© <span class="emphasis">*JNI_OnLoad*</span> ÊñπÊ≥ïÂÆåÊàêÁªëÂÆö„ÄÇÂΩì so Ë¢´Âä†ËΩΩÊó∂‰ºöË∞ÉÁî® <span class="emphasis">*JNI_OnLoad*</span> ÊñπÊ≥ïËøõË°åÊ≥®ÂÜå„ÄÇ</span><br></pre></td></tr></table></figure></p>
<p>public class Test{<br>  public static native void testJni();<br>}<br>void test(JNIEnv *env,jclass clazz){<br>  //native ÂÆûÁé∞ÈÄªËæë<br>}</p>
<p>//Áî≥ÊòéÂàóË°®<br>JNINativeMethod nativeMethods[] = {<br>  {‚Äútest‚Äù,‚Äù()V‚Äù,(void <em>) test}<br>}<br>JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM </em>vm,void *reserved){</p>
<p>  //ÂÆûÁé∞Ê≥®ÂÜå<br>  jclass clz = env-&gt;FindClass(‚Äúcom/effective/android/Test‚Äù);<br>  if(env-&gt;RegisterNatives(clz, nativeMethods,sizeOf(nativeMethods)/sizeOf(nativeMethods[0])) != JNI_OK){<br>    return JNI_ERR;<br>  }<br>  //‚Ä¶<br>}<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Âú®‰øÆÂ§çÂú®‰∏äËø∞‰∏§ÁßçÊ≥®ÂÜåÂú∫ÊôØÁöÑ so ‰ºöÂ≠òÂú®Â±ÄÈôêÔºö</span><br><span class="line"><span class="code">  </span></span><br><span class="line">*<span class="strong">*ÈíàÂØπÂä®ÊÄÅÊ≥®ÂÜåÂú∫ÊôØ*</span><span class="strong">*</span></span><br><span class="line"><span class="strong">*</span> ÂØπ‰∫é*<span class="strong">*ArtËôöÊãüÊú∫*</span><span class="strong">*ÈúÄË¶ÅÂÜçÊ¨°Âä†ËΩΩË°•‰∏Å so Êù•ÂÆåÊàêÊñπÊ≥ïÊò†Â∞ÑÁöÑÊõ¥Êñ∞Ôºõ</span></span><br><span class="line"><span class="strong">*</span> ÂØπ*<span class="strong">*DalvikËôöÊãüÊú∫*</span><span class="strong">*ÂàôÈúÄË¶ÅÂØπË°•‰∏Å so ÈáçÂëΩÂêçÊù•ÂÆåÊàê Art ‰∏ãÊñπÊ≥ïÊò†Â∞ÑÁöÑÊõ¥Êñ∞„ÄÇ</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">*</span><span class="strong">*ÈíàÂØπÈùôÊÄÅÊ≥®ÂÜåÂú∫ÊôØ*</span><span class="strong">*</span></span><br><span class="line"><span class="strong">*</span> Ëß£Èô§Â∑≤ÁªèÂÆåÊàêÈùôÊÄÅÊ≥®ÂÜåÁöÑÊñπÊ≥ïÂ∑•‰ΩúÈöæÂ∫¶Â§ßÔºõ</span><br><span class="line"><span class="bullet">* </span>so ‰∏≠Âì™‰∫õÈùôÊÄÅÊ≥®ÂÜåÁöÑÊñπÊ≥ïÈúÄË¶ÅÊõ¥Êñ∞‰πüÂæàÈöæÂæóÁü•„ÄÇ</span><br><span class="line"></span><br><span class="line">Áî±‰∫éÊ∂âÂèäË°•‰∏Å so ÁöÑ‰∫åÊ¨°Âä†ËΩΩÔºåÂÜÖÂ≠òÊçüËÄóÂ§ßÔºåÂèØËÉΩÂØºËá¥*<span class="strong">*JNI OOM*</span><span class="strong">*Âá∫Áé∞„ÄÇÂêåÊó∂Â¶ÇÊûúÂä®ÊÄÅÊ≥®ÂÜå so Âú∫ÊôØ‰∏ã‰∏≠Êñ∞Â¢û‰∫Ü‰∏Ä‰∫õÊñπÊ≥ï‰ΩÜÊòØÂØπÂ∫îÁöÑ *</span><span class="strong">*DEXÊñá‰ª∂*</span>* ‰∏≠Ê≤°Êúâ‰∏é‰πãÂØπÂ∫îÁöÑÊñπÊ≥ïÔºåÂàô‰ºöÂá∫Áé∞ <span class="strong">*NoSuchMethodError*</span> ÂºÇÂ∏∏„ÄÇ </span><br><span class="line"></span><br><span class="line">ËôΩÁÑ∂Âõ∞ÈöæÔºå‰ΩÜÊòØÊñπÊ°à‰πüÊòØÊúâÁöÑ„ÄÇ</span><br><span class="line"></span><br><span class="line">ÂÅáÂ¶ÇÂú®Âú®Â∫îÁî®Âä†ËΩΩ so ‰πãÂâçËÉΩÂ§üÂÖàÂ∞ùËØïÂä†ËΩΩË°•‰∏Å so ÂÜçÂä†ËΩΩÂ∫îÁî® soÔºåÂ∞±ÂèØ‰ª•ÂÆûÁé∞‰øÆÂ§ç„ÄÇ</span><br><span class="line"><span class="code">  </span></span><br><span class="line">ÊØîÂ¶ÇËá™ÂÆö‰πâ‰∏Ä‰∏™ÊñπÊ≥ïÔºåÊõøÊç¢Êéâ <span class="strong">*System.loadLibrary*</span> ÊñπÊ≥ïÊù•ÂÆåÊàêËøô‰∏™ÈÄªËæëÔºå‰ΩÜÊòØÂ≠òÂú®‰∏Ä‰∏™Áº∫ÁÇπÂ∞±ÊòØÂæàÈöæ‰øÆÂ§çÂ∑≤ÁªèÊ∑∑Ê∑ÜÁºñËØëÁöÑÁ¨¨‰∏âÊñπÂ∫ì„ÄÇ</span><br><span class="line"></span><br><span class="line">ÊâÄ‰ª•ÊúÄÂêéÈááÂèñÁöÑÊòØÁ±ª‰ºº*<span class="strong">*Á±ª‰øÆÂ§ç*</span><span class="strong">*ÁöÑÊ≥®ÂÖ•ÊñπÊ°à„ÄÇso Â∫ìË¢´Âä†ËΩΩ‰πãÂêéÔºåÊúÄÁªà‰ºöÂú® *</span>DexPathList.nativeLibararyDirectories/nativeLiraryPathElements* ÂèòÈáèÊâÄË°®Á§∫ÁöÑÁõÆÂΩï‰∏ãÈÅçÂéÜÊêúÁ¥¢Âà∞„ÄÇÂâçËÄÖ*<span class="strong">*nativeLibararyDirectories*</span><span class="strong">*ÊòØ *</span>SDK&lt;23* Êó∂ÁöÑÁõÆÂΩïÔºåÂêéËÄÖ*<span class="strong">*nativeLibararyDirectories*</span><span class="strong">*ÊòØ *</span>SDK&gt;=23* Êó∂ÁöÑÁõÆÂΩïÔºåÂè™ÈúÄË¶ÅÊääË°•‰∏Å so ÁöÑË∑ØÂæÑÊèíÂÖ•Âà∞‰ªñ‰ª¨ÁõÆÂΩïÁöÑÊúÄÂâçÈù¢Âç≥ÂèØ„ÄÇ</span><br><span class="line"></span><br><span class="line">‰ΩÜÊòØ so Â∫ìÊñá‰ª∂Â≠òÂú®Â§öÁßç CPU Êû∂ÊûÑÔºåË°•‰∏ÅÂíå apk ‰∏ÄÊ†∑ÈÉΩÂ≠òÂú®ÈúÄË¶ÅÈÄâÊã©Âì™‰∏™*<span class="strong">*abi*</span><span class="strong">*ÁöÑ so Êù•ÊâßË°åÁöÑÈóÆÈ¢ò„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">*</span><span class="strong">*Sophix*</span>* Êèê‰æõ‰∫Ü‰∏ÄÁßçÊÄùË∑Ø, ÈÄöËøá‰ªéÂ§ö‰∏™*<span class="strong">*abis*</span><span class="strong">*ÁõÆÂΩï‰∏≠ÈÄâÊã©‰∏Ä‰∏™ÂêàÈÄÇÁöÑ*</span><span class="strong">*primaryCpuAbi*</span><span class="strong">*ÁõÆÂΩïÊèíÂà∞ *</span>nativeLibararyDirectories/nativeLiraryPathElements* Êï∞ÁªÑ‰∏≠„ÄÇ</span><br><span class="line"></span><br><span class="line">1. <span class="strong">*SDK&gt;=21*</span>Êó∂Áõ¥Êé•ÂèçÂ∞ÑÊãøÂà∞ ApplicationInfo ÂØπË±°ÁöÑ*<span class="strong">*primaryCpuAbi*</span><span class="strong">*„ÄÇ</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">2. *</span>SDK&lt;21*Êó∂Áî±‰∫é‰∏çÊîØÊåÅ 64 ‰ΩçÊâÄ‰ª•Áõ¥Êé•Êää <span class="strong">*Build.CPU_ABI, Build.CPU_ABI2*</span> ‰Ωú‰∏∫*<span class="strong">*primaryCpuAbi*</span><span class="strong">*„ÄÇ</span></span><br><span class="line"><span class="strong">                </span></span><br><span class="line"><span class="strong">ÂÖ∑‰ΩìÂèØÂÆûÁé∞‰∏∫‰ª•‰∏ãÈÄªËæë„ÄÇ</span></span><br></pre></td></tr></table></figure></p>
<p>ApplicationInfo mAppInfo = pm.getApplicationInfo(mApp.getPackageName(),0);<br>if(mAppInfo != null){<br>   // SDK&gt;=21<br>  if(Build.VERSION&gt;SDK_INT &gt;= Build.VERSION_CODES&gt;LOLLIPOP){<br>    File thirdFiled = ApplicationInfo.class.getDeclaredFiled(‚ÄúprimaryCpuAbi‚Äù);<br>    thirdFiled.setAccessable(true);<br>    String cupAbi = (String) thirdFiled.get(mAppInfo);<br>    primaryCpuAbis = new String<a href="cpuAbi"></a>;<br>  }else{<br>    primaryCpuAbis = new String<a href="Build.CPU_ABIÔºåBuild.CPU_ABI2"></a>;<br>  }<br>}<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  </span></span><br><span class="line">## ÊñπÊ°àÈÄâÂûã</span><br><span class="line"><span class="code">  </span></span><br><span class="line">‰∏§Âπ¥ÂâçÂú®ÊóßÁöÑÂõ¢ÈòüÈ¢ÑÁ†îÁÉ≠‰øÆÂ§çÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÈÄâÊã©‰∫Ü*<span class="strong">*tinker*</span><span class="strong">*„ÄÇÁé∞Âú®ÊâÄÂú®ÁöÑÂõ¢Èòü‰πüËøòÊòØ*</span><span class="strong">*tinker*</span><span class="strong">*„ÄÇ</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">ÂØπ‰∫é‰∏≠Â∞èÂõ¢ÈòüËÄåË®ÄÔºåÊàë‰ª¨ÈÄâÊã©ÊñπÊ°à‰∏ÄËà¨ÈúÄË¶ÅÔºö*</span><span class="strong">*ÂÖºÂÆπÊÄßÂº∫*</span><span class="strong">*Ôºå*</span><span class="strong">*‰øÆÂ§çËåÉÂõ¥Âπø*</span><span class="strong">*Ôºå*</span><span class="strong">*ÂÖçË¥π*</span><span class="strong">*Ôºå*</span><span class="strong">*ÂºÄÊ∫êÁ§æÂå∫Ê¥ªË∑É*</span><span class="strong">*„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">*</span> ÂÖºÂÆπÊÄßÂº∫ÔºåÈúÄË¶ÅÂÖºÂÆπ Android ÁöÑÊâÄÊúâÁâàÊú¨ÔºåÊàë‰ª¨‰πüÂ∞ùËØïËøá*<span class="strong">*AndFix*</span><span class="strong">*Ôºå*</span><span class="strong">*QZone*</span><span class="strong">*Á≠âÊñπÊ°àÔºåÂü∫Êú¨*</span><span class="strong">*Android N*</span><span class="strong">*‰πãÂêéÂ∞±ÊîæÂºÉ‰∫ÜÔºõ</span></span><br><span class="line"><span class="strong">*</span> ‰øÆÂ§çËåÉÂõ¥ÂπøÔºåÈô§‰∫ÜËÉΩ‰øÆÂ§çÁ±ªÂú∫ÊôØÔºåËµÑÊ∫êÔºåso ‰πüÈúÄË¶ÅËÄÉËôëÔºõ</span><br><span class="line"><span class="bullet">* </span>ÂÖçË¥πÔºå‰∏ÄÂºÄÂßã*<span class="strong">*AndFix*</span><span class="strong">*Êó∂ÊúÄÁÆÄÂçïÊòìÁî®ÔºåÂêéÈù¢ËΩ¨*</span><span class="strong">*sophix*</span><span class="strong">*ÂêéÊî∂Ë¥πÂ∞±ÊîæÂºÉ‰∫Ü„ÄÇÂ¶ÇÊûúÊúâÈáë‰∏ªÁà∏Áà∏ÂèØ‰ª•ÂøΩÁï•Ôºå*</span><span class="strong">*sophix*</span><span class="strong">*ÈùûÂ∏∏ÁÆÄÂçïÊòìÁî®Ôºå‰∏äËø∞ÂéüÁêÜÊäÄÊúØ‰πüÂèÇËÄÉ‰∫Ü*</span><span class="strong">*sophix*</span>* ÁöÑÊäÄÊúØÊñπÊ°àÔºåÈùûÂ∏∏‰ºòÁßÄÔºõ</span><br><span class="line"><span class="bullet">* </span>Á§æÂå∫Ê¥ªË∑ÉÔºåÁõÆÂâç*<span class="strong">*tinker*</span><span class="strong">*ÁöÑÂºÄÊ∫êÁª¥Êä§ËøòÁÆó‰∏çÈîô„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">ÊïÖÊàë‰ª¨ÊúÄÁªàÈÄâÊã©‰ª•*</span><span class="strong">*tinker*</span><span class="strong">*‰Ωú‰∏∫ÁÉ≠‰øÆÂ§çÊñπÊ°àÊäÄÊúØÊ°ÜÊû∂Êù•ÂÆûÁé∞ÁÉ≠‰øÆÂäüËÉΩ„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">## ÈõÜÊàê‰∏éÂÆûË∑µÊµÅÁ®ã</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">### Tinker ÈõÜÊàê</span></span><br><span class="line"><span class="strong">Âú®Êàë‰ª¨È°πÁõÆ‰∏≠Ôºå*</span><span class="strong">*tinker*</span><span class="strong">*Áõ∏ÂÖ≥‰ª£Á†ÅÊòØ‰Ωú‰∏∫*</span><span class="strong">*Service*</span><span class="strong">*Â±Ç‰∏≠ÁöÑ‰∏Ä‰∏™Ê®°Âùó„ÄÇÊ®°ÂùóÂåÖÂê´‰ª•‰∏ã‰ø°ÊÅØÔºö</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">*</span> *<span class="strong">*‰ª£Á†ÅÁõÆÂΩï*</span><span class="strong">*ÔºåÂåÖÂê´*</span><span class="strong">*tinker*</span><span class="strong">*Êèê‰æõÁöÑÊâÄÊúâÂ∫ìÂèäÈ°πÁõÆÂ∞ÅË£ÖÁöÑ‰ª£Á†ÅÔºåÊ∂âÂèä‰∏ãËΩΩÔºåÂä†ËΩΩÔºåË∞ÉËØïÔºåÊó•Âøó‰∏äÊä•Á≠âÂú∫ÊôØÔºõ</span></span><br><span class="line"><span class="strong">*</span> *<span class="strong">*GradleËÑöÊú¨*</span><span class="strong">*ÔºåÈÖçÁΩÆ‰ø°ÊÅØÁ≠âÔºõ</span></span><br><span class="line"><span class="strong">*</span> *<span class="strong">*Âü∫Á∫øËµÑÊ∫ê*</span><span class="strong">*ÔºåÁî®‰∫éÂ≠òÊîæÊú™Âä†Âõ∫ÂåÖÔºåMappingÊñá‰ª∂ÔºåRÊñá‰ª∂Á≠âÔºõ</span></span><br><span class="line"><span class="strong">*</span> *<span class="strong">*ShellËÑöÊú¨*</span><span class="strong">*ÔºåÁî®‰∫éÊâìÂåÖË°•‰∏ÅÁöÑËÑöÊú¨ÔºåÊèê‰æõÁªô*</span><span class="strong">*Jenkins*</span><span class="strong">*‰ΩøÁî®ÔºåÁî®‰∫éËØªÂèñÂü∫Á∫øËµÑÊ∫êËÅîÂêà*</span><span class="strong">*tinker*</span><span class="strong">*Êèê‰æõÁöÑÊèí‰ª∂ËøõË°åË°•‰∏ÅÁîüÊàê„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">‰∏ªÁ´ØÈ°πÁõÆÁî±‰∫éÊàë‰ª¨‰ΩøÁî®*</span><span class="strong">*ApplicationLike*</span><span class="strong">*ËøõË°å‰ª£ÁêÜÔºåÊâÄ‰ª•ÊòØÂê¶ÂºÄÂêØÁÉ≠‰øÆÂ§çÔºåÈÉΩÈúÄË¶Å tinker Êù•‰ª£ÁêÜÊàë‰ª¨ÁöÑ *</span><span class="strong">*Application*</span><span class="strong">*„ÄÇ‰∏ªÁ´ØÊ†πÊçÆÊòØÂê¶ÊâìÂºÄÁÉ≠‰øÆÂ§çÂäüËÉΩÂä®ÊÄÅ *</span>apply* Gradle ËÑöÊú¨ÂèäÂØπ <span class="strong">*DefaultLifeCycle.flag*</span> ËøõË°åÂºÄÂÖ≥ÂàáÊç¢„ÄÇ </span><br><span class="line"><span class="code">  </span></span><br><span class="line"></span><br><span class="line">### ÂÆûË∑µÊµÅÁ®ã</span><br><span class="line"></span><br><span class="line">Âú®Áîü‰∫ßÁéØÂ¢É‰∏≠ÔºåÊàë‰ª¨ÈÄöËøá*<span class="strong">*Jenkins*</span><span class="strong">*Âπ≥Âè∞ËæìÂá∫‰∫ßÁâ©ÔºåÂπ∂ÂÖàÊää‰∫ßÁâ©ËæìÂá∫Âà∞ÂÜÖÈÉ®ÊµãËØïÂπ≥Âè∞„ÄÇÂ¶ÇÈúÄË¶ÅÂØπÂ§ñÂèëÂ∏ÉÂàôÂêåÊó∂‰∏ä‰º†‰∫ßÁâ©Âà∞*</span><span class="strong">*CDN*</span><span class="strong">*Êñá‰ª∂ÊúçÂä°Âô®„ÄÇ</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">Âè¶Â§ñÔºåÂÜÖÈÉ®Áª¥Êä§ÁöÑ*</span><span class="strong">*CMSÂπ≥Âè∞*</span><span class="strong">*ÂèØÂØπË°•‰∏Å‰ø°ÊÅØËøõË°åÂàÜÂèëÔºåÂÆ¢Êà∑Á´ØÈÄöËøáËØªÂèñ*</span><span class="strong">*CMSÈÖçÁΩÆ‰ø°ÊÅØ*</span><span class="strong">*Êù•Ëé∑ÂèñË°•‰∏Å‰ø°ÊÅØÔºåËøõËÄåÈ©±Âä®ÂÆ¢Êà∑Á´Ø‰øÆÂ§çË°å‰∏∫„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">‰∏ãÈù¢Ê¢≥ÁêÜ‰∫ÜÁ∫ø‰∏äÊ∂âÂèäË°•‰∏Å‰∏öÂä°ÁöÑÊâÄÊúâÊµÅÁ®ãÔºåÂÆåÂÖ®ÂèØÂ§çÁî®Âà∞‰ªª‰ΩïÈ°πÁõÆÂú∫ÊôØÔºö</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">1. releaseÂàÜÊîØ‰øùÁïôÂü∫Á∫øËµÑÊ∫ê</span></span><br><span class="line"><span class="strong">2. ‰øÆÂ§çÁ∫ø‰∏äÁ¥ßÊÄ•Áº∫Èô∑</span></span><br><span class="line"><span class="strong">3. ÁîüÊàêË°•‰∏Å‰∏ä‰º†Âà∞ÊúçÂä°Âô®</span></span><br><span class="line"><span class="strong">4. ÂàÜÂèëÂπ≥Âè∞ÈÖçÁΩÆË°•‰∏Å‰ø°ÊÅØ</span></span><br><span class="line"><span class="strong">5. ÂÆ¢Êà∑Á´ØÂä†ËΩΩË°•‰∏Å‰ø°ÊÅØ</span></span><br><span class="line"><span class="strong">6. Ë∞ÉËØï‰∏éÊó•ÂøóÊîØÊåÅ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">ÊØè‰∏™Ê®°ÂùóÈÉΩÊ∂âÂèäÂà∞ÁúüÂÆûÈ°πÁõÆÁöÑÊµÅÁ®ã„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">#### release ÂàÜÊîØ‰øùÁïôÂü∫Á∫øËµÑÊ∫ê</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">‰∏ÄËà¨ÁöÑ*</span><span class="strong">*Git*</span><span class="strong">*ÂºÄÂèëÊµÅÁ®ãÂèØÂèÇËÄÉ [Git Flow](https://nvie.com/posts/a-successful-git-branching-model/ "Git Flow") ‰∏ÄÊñáÔºåÊ†∏ÂøÉÁöÑÂàÜÊîØÊ¶ÇÂøµ‰∏ªË¶ÅÁî±‰ª•‰∏ã‰∫îÁ±ªÂàÜÊîØÔºö</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">*</span> *<span class="strong">*master‰∏ªÂàÜÊîØ*</span><span class="strong">*ÔºåÂèëÂ∏ÉÁ∫ø‰∏äÂ∫îÁî®ÂèäÁâàÊú¨ TagÔºõ</span></span><br><span class="line"><span class="strong">*</span> *<span class="strong">*developÂºÄÂèëÂàÜÊîØ*</span><span class="strong">*ÔºåÂºÄÂèëÊÄªÂàÜÊîØÔºõ</span></span><br><span class="line"><span class="strong">*</span> *<span class="strong">*featureÂäüËÉΩÂàÜÊîØ*</span><span class="strong">*ÔºåÁâàÊú¨ÂäüËÉΩÂºÄÂèëÊµãËØïÂàÜÊîØÔºõ</span></span><br><span class="line"><span class="strong">*</span> *<span class="strong">*hotfixË°•‰∏ÅÂàÜÊîØ*</span><span class="strong">*ÔºåÁ¥ßÊÄ• Bug ‰øÆÂ§çÂàÜÊîØÔºõ</span></span><br><span class="line"><span class="strong">*</span> *<span class="strong">*releaseÈ¢ÑÂèëÂàÜÊîØ*</span><span class="strong">*ÔºåÂäüËÉΩÊµãËØïÂõûÂΩíÈ¢ÑÂèëÁâàÂàÜÊîØ„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">‰∏ÄËà¨‰∏Ä‰∏™ÁâàÊú¨ÂèØËÉΩÈúÄË¶ÅÂºÄÂèëÂ§ö‰∏™ÂäüËÉΩÔºåÂèØ‰ªé*</span><span class="strong">*develop*</span><span class="strong">*ÊãâÂèñ‰∏Ä‰∏™ËØ•ÁâàÊú¨ÁöÑÊÄª*</span><span class="strong">*feature*</span><span class="strong">*ÂàÜÊîØÔºåÁÑ∂ÂêéËØ•ÊÄª*</span><span class="strong">*feature*</span><span class="strong">*ÂàÜÊîØÂÜçÊãâÂèñÂêÑ‰∏™Â≠êÂàÜÊîØÁªôÂõ¢ÈòüÂÜÖÈÉ®‰∫∫ÂëòÂºÄÂèë„ÄÇËøôÊ†∑ÂèØÂ∞ΩÂèØËÉΩÈÅøÂÖçÊàñÂáèÂ∞ëÂàÜÊîØÁöÑÂêàÂπ∂ÂÜ≤Á™Å„ÄÇ</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">‰∏ãÈù¢‰ª•Êàë‰ª¨Âõ¢ÈòüÊó•Â∏∏ÂºÄÂèëÂàÜÊîØÂÆûË∑µÂ±ïÂºÄÔºåÂêåÊó∂Âå∫ÂàÜÂ∏∏ËßÑÂèëÁâàÂèäË°•‰∏ÅÂèëÁâàÊù•‰øÆÂ§çÁ¥ßÊÄ• Bug Êù•Ê¢≥ÁêÜÊï¥‰∏™ÁâàÊú¨ÁöÑÂºÄÂèëÊµÅÁ®ãÔºåËßÅ‰∏ãÂõæ(Âº∫ÁÉàÂª∫ËÆÆËÆ§ÁúüÁúã‰∏Ä‰∏ã)„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">&lt;img src="https://raw.githubusercontent.com/YummyLau/hexo/master/source/pics/20200502/patch_info_4.png" align=center  /&gt;</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">&gt; Â¶ÇÊûúÂêå‰∏Ä‰∏™ÁâàÊú¨Â≠òÂú®Â§ö‰∏™Ë°•‰∏ÅÔºåÊØîÂ¶Ç release 1.0.0 Âá∫Áé∞ Bug ÈúÄË¶Å‰øÆÂ§çÔºåÂàôÂèØË°çÁîüÂá∫ hotfix 1.0.0.1 ‰Ωú‰∏∫Á¨¨‰∏Ä‰∏™Ë°•‰∏ÅÁöÑÂàÜÊîØÔºåhotfix 1.0.0.2 ‰Ωú‰∏∫Á¨¨‰∫å‰∏™Ë°•‰∏ÅÂàÜÊîØ‰∏ÄÊ¨°Á±ªÊé®„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">Âú®*</span><span class="strong">*release*</span><span class="strong">*ÊµãËØïÂõûÂΩíÁªìÊùüÂêéÔºåÈúÄË¶ÅËæìÂá∫ÂèëÁâàÂàÜÊîØÂâçÔºå*</span><span class="strong">*Jenkins*</span><span class="strong">*ÊâìÂºÄËæìÂá∫Âü∫Á∫øËµÑÊ∫êÁöÑÈÖçÁΩÆÔºåÂü∫Á∫øËµÑÊ∫êÂ∞±‰ºöË∑üÈöèÊâìÂåÖ‰∫ßÁâ©‰∏ÄËµ∑ÂèëÂ∏ÉÂà∞ÂÜÖÈÉ®ÊµãËØïÂπ≥Âè∞„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">Ëøô‰∫õËµÑÊ∫ê‰ºöÈÄöËøá‰∏Ä‰∏™Â∫èÂàóÂè∑ËøõË°åÂÖ≥ËÅîÂå∫ÂàÜÔºåÂú®ÂëΩÂêç‰∏ä‰ΩìÁé∞„ÄÇÊàë‰ª¨Âõ¢Èòü‰ΩøÁî®ÁöÑÊòØ Git Êèê‰∫§ËÆ∞ÂΩïÊù•‰Ωú‰∏∫Â∫èÂàóÂè∑Âå∫ÂàÜ„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">#### ‰øÆÂ§çÁ∫ø‰∏äÁ¥ßÊÄ•Áº∫Èô∑</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">‰ªéÂéüÂèëÂ∏ÉÁâàÊú¨ÂØπÂ∫îÁöÑ*</span><span class="strong">*release*</span><span class="strong">*ÂàÜÊîØ‰∏≠ÊãâÂá∫*</span><span class="strong">*hotfix*</span><span class="strong">*ÂàÜÊîØÔºåÈíàÂØπÁ¥ßÊÄ•Áº∫Èô∑ËøõË°å‰øÆÂ§ç„ÄÇ</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">ÂêåÊó∂‰ªéÂÜÖÈÉ®ÊµãËØïÂπ≥Âè∞‰∏ãËΩΩ*</span><span class="strong">*Âü∫Á∫øËµÑÊ∫ê*</span><span class="strong">*Â≠òÊîæÂà∞ËßÑÂÆöÁöÑÁõÆÂΩïÂêéÔºåÊääËØ•ÂàÜÊîØÊé®ÈÄÅÂà∞*</span><span class="strong">*remote*</span><span class="strong">*ËøúÁ´Ø„ÄÇËøôÈáå‰ΩøÁî®ÁöÑÊòØ*</span>tinkerPatchRelease* ËøõË°åË°•‰∏ÅÂêàÊàêÔºåÊâÄÊúâÂêàÊàêÂ∑•‰ΩúÈÄªËæëÈÉΩÂÜôÂú®‰∫Ü*<span class="strong">*ShellËÑöÊú¨*</span><span class="strong">*‰∏≠ËøûÂêåÈ°πÁõÆ‰∏ÄËµ∑Êé®‰∏äËøúÁ´ØÔºåÁ≠âÂæÖË¢´*</span><span class="strong">*Jenkins*</span><span class="strong">*ÊâßË°åÂ§ÑÁêÜ„ÄÇ</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">#### ÁîüÊàêË°•‰∏Å‰∏ä‰º†</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">*</span><span class="strong">*Jenkins*</span><span class="strong">*Âª∫Á´ã‰∏Ä‰∏™*</span><span class="strong">*Job*</span><span class="strong">*Áî®‰∫éÁîü‰∫ßË°•‰∏Å„ÄÇÊØèÊ¨°ÊûÑÂª∫Ë°•‰∏ÅÂâçÔºåÊää*</span><span class="strong">*‰øÆÂ§çÁ∫ø‰∏äÁ¥ßÊÄ•Áº∫Èô∑*</span><span class="strong">*Ê≠•È™§ÂØπÂ∫îÁöÑÂàÜÊîØÂêçÂÜôÂà∞*</span><span class="strong">*Job*</span><span class="strong">*ÈÖçÁΩÆ‰ø°ÊÅØ‰∏≠„ÄÇ</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">ËØ• *</span><span class="strong">*Job*</span><span class="strong">*ÊâßË°åÊó∂‰ºöÂÖà‰ªé*</span><span class="strong">*remote*</span><span class="strong">*ËøúÁ´ØÊãâÂèñ*</span><span class="strong">*hotfix*</span><span class="strong">*ÂàÜÊîØÔºåÁÑ∂ÂêéÊâßË°å*</span><span class="strong">*shellËÑöÊú¨*</span><span class="strong">*ÂØπ*</span><span class="strong">*Âü∫Á∫øËµÑÊ∫ê*</span><span class="strong">*ËøõË°åËØªÂèñÂπ∂ÂÆåÊàê Gradle ËÑöÊú¨ÁöÑÈÖçÁΩÆÔºåÂÜçË∞ÉÁî® *</span>tinkerPatchRelease* ËøõË°åË°•‰∏ÅÂêàÊàêÔºåÊúÄÂêéÂØπË°•‰∏Å‰∫ßÁâ©ËøõË°åÈáçÂëΩÂêçÂêé‰∏ä‰º†Âà∞ÂÜÖÈÉ®ÊµãËØïÂπ≥Âè∞„ÄÇ</span><br><span class="line"></span><br><span class="line">#### ÂàÜÂèëÂπ≥Âè∞ÈÖçÁΩÆË°•‰∏Å‰ø°ÊÅØ</span><br><span class="line"></span><br><span class="line">È¶ñÂÖàÊòéÁ°ÆÂ∫îÁî®‰∏éÁâàÊú¨ÔºåË°•‰∏ÅÈó¥ÁöÑÂÖ≥Á≥ªÔºö</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>‰∏Ä‰∏™Â∫îÁî®Â≠òÂú®Â§ö‰∏™ÁâàÊú¨</span><br><span class="line"><span class="bullet">* </span>‰∏Ä‰∏™Â∫îÁî®ÁâàÊú¨ÂèØÂ≠òÂú®Â§ö‰∏™Ë°•‰∏ÅÔºåÂêå‰∏™ÁâàÊú¨ÁöÑË°•‰∏ÅÂèØ‰ª•‰∫íÁõ∏Ë¶ÜÁõñ</span><br><span class="line"></span><br><span class="line">Ê†πÊçÆËøô‰∏™ÂÖ≥Á≥ªÔºåÊàë‰ª¨ÈúÄË¶ÅËÆæËÆ°ÂØπÂ∫îÊï∞ÊçÆÁªìÊûÑÊù•ÊâøËΩΩË°•‰∏Å‰ø°ÊÅØ„ÄÇ</span><br><span class="line"></span><br><span class="line">ÂÆö‰πâË°•‰∏Å‰ø°ÊÅØÔºåÁâàÊú¨Ë°•‰∏Å‰ø°ÊÅØÔºåÂ∫îÁî®Ë°•‰∏Å‰ø°ÊÅØ</span><br></pre></td></tr></table></figure></p>
<p>public class PatchInfo {<br>    public String appPackageName;<br>    public String appVersionName;<br>    //ÁÅ∞Â∫¶ÊàñËÄÖÂÖ®ÈáèÔºåÂú®(0-10000]‰πãÈó¥<br>    public int percent = Constants.VERSION_INVALID;<br>    //Ë°•‰∏ÅÁâàÊú¨ÔºåÊúâÊïàÁöÑÁâàÊú¨Â∫îËØ•ÊòØ(1-Ê≠£Êó†Á©∑)Ôºå0‰∏∫ÂõûÊªöÔºåÂ¶ÇÊûúÊâæÂà∞patchData‰∏ãÁöÑË°•‰∏ÅversionÂåπÈÖçÔºåÂàô‰øÆÂ§çÔºåÂê¶ÂàôË∑≥Ëøá<br>    public long version = Constants.VERSION_INVALID;<br>    //Ë°•‰∏ÅÂåÖÂ§ßÂ∞è<br>    public long size;<br>    //Ë°•‰∏ÅÊèèËø∞<br>    public String desc;<br>    //Ë°•‰∏ÅÂàõÂª∫Êó∂Èó¥<br>    public long createTime;<br>    //Ë°•‰∏Å‰∏ãËΩΩÈìæÊé•<br>    public String downloadUrl;<br>    //Ë°•‰∏ÅÊñá‰ª∂ md5<br>    public String md5;<br>  }<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">``` </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VersionPatchInfo</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Â∫îÁî®ÂåÖÂêç</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span> packageName;</span><br><span class="line">    <span class="comment">//Â∫îÁî®ÁâàÊú¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span> versionName;</span><br><span class="line">    <span class="comment">//ÁõÆÊ†áË°•‰∏ÅÁâàÊú¨</span></span><br><span class="line">    <span class="keyword">public</span> long targetPatchVersion;</span><br><span class="line">    <span class="comment">//Êüê‰∏™ÁâàÊú¨‰∏ãÁöÑÂ§ö‰∏™Ë°•‰∏Å‰ø°ÊÅØÔºå‰∏Ä‰∏™ÁâàÊú¨ÂèØÊúâÂ§ö‰∏™Ë°•‰∏Å</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;PatchInfo&gt; patchList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PatchScriptInfo</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Â∫îÁî®Êä•Âêç</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span> packageName;              </span><br><span class="line">    <span class="comment">//ÂΩìÂâçÊâÄÊúâË°•‰∏ÅÂàóË°®ÔºåÊåâÁâàÊú¨Âå∫ÂàÜ</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;<span class="keyword">String</span>, VersionPatchInfo&gt; versionPatchList;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Âàô‰∏âËÄÖÁöÑÂÖ≥Á≥ª‰∏∫</p>
<p><img src="https://raw.githubusercontent.com/YummyLau/hexo/master/source/pics/20200502/patch_info_1.png" align="center"></p>
<p>ÂÆö‰πâ‰∏Ä‰ªΩÈÖçÁΩÆ‰ø°ÊÅØÊñá‰ª∂ÔºåÁî®‰∫éÂ£∞ÊòéÂÖ®Âπ≥Âè∞ÊâÄÊúâÁâàÊú¨ÁöÑË°•‰∏Å‰ø°ÊÅØ„ÄÇ</p>
<p><img src="https://raw.githubusercontent.com/YummyLau/hexo/master/source/pics/20200502/patch_info_2.png" align="center"></p>
<p>ÂàôÊàë‰ª¨ÁöÑÂàÜÂèëÂπ≥Âè∞<strong>CMS</strong>‰ºöÊ†πÊçÆËßÑÂàôÈÄöËøáÈÖçÁΩÆÈ°πÊù•ÊûÑÂª∫‰∏äËø∞Ëøô‰ªΩÈÖçÁΩÆÊñá‰ª∂ÔºåÂÆ¢Êà∑Á´ØÈÄöËøá<strong>CMS</strong>Êèê‰æõÁöÑ <em>Api</em> Êù•ËØ∑Ê±ÇËøô‰ªΩÈÖçÁΩÆ‰ø°ÊÅØÊñá‰ª∂„ÄÇ</p>
<h4 id="ÂÆ¢Êà∑Á´ØÂä†ËΩΩË°•‰∏Å‰ø°ÊÅØ"><a href="#ÂÆ¢Êà∑Á´ØÂä†ËΩΩË°•‰∏Å‰ø°ÊÅØ" class="headerlink" title="ÂÆ¢Êà∑Á´ØÂä†ËΩΩË°•‰∏Å‰ø°ÊÅØ"></a>ÂÆ¢Êà∑Á´ØÂä†ËΩΩË°•‰∏Å‰ø°ÊÅØ</h4><p>Èô§‰∫Ü‰∏ªÂä®ÊãâÂèñ<strong>CMS</strong>ÈÖçÁΩÆ‰ø°ÊÅØÊñá‰ª∂Â§ñÔºå‰∏ÄËà¨ËøòÈúÄË¶ÅÊîØÊåÅË¢´Âä®Êé•Êî∂Êé®ÈÄÅ‰ø°ÊÅØ„ÄÇ</p>
<ul>
<li>Ë¢´Âä®Êé•Êî∂Êé®ÈÄÅÔºåÂÆ¢Êà∑Á´ØÈÄöËøáÊé•Êî∂Êé®Âä®‰ø°ÊÅØÊù•ÊûÑÂª∫ÈÖçÁΩÆ‰ø°ÊÅØÔºõ</li>
<li>‰∏ªÂä®ÊãâÂèñÈÖçÁΩÆÔºåÈÄöËøá<strong>CMS</strong>Êèê‰æõÁöÑ <em>Api</em> Êù•ÂÆûÊó∂ÊãâÂèñÈÖçÁΩÆ‰ø°ÊÅØÔºåËøõËÄåÊûÑÂª∫ÈÖçÁΩÆ‰ø°ÊÅØ„ÄÇ</li>
</ul>
<p>Êó†ËÆ∫ÈÄöËøáÂì™ÁßçÊñπÂºèÊù•ÊûÑÂª∫ÈÖçÁΩÆ‰ø°ÊÅØÔºåÂêéÁª≠ÈÉΩÈúÄË¶ÅÂÆåÊàê‰ª•‰∏ãÊµÅÁ®ãÔºö</p>
<p><img src="https://raw.githubusercontent.com/YummyLau/hexo/master/source/pics/20200502/patch_info_3.png" align="center"></p>
<h4 id="Ë∞ÉËØï‰∏éÊó•ÂøóÊîØÊåÅ"><a href="#Ë∞ÉËØï‰∏éÊó•ÂøóÊîØÊåÅ" class="headerlink" title="Ë∞ÉËØï‰∏éÊó•ÂøóÊîØÊåÅ"></a>Ë∞ÉËØï‰∏éÊó•ÂøóÊîØÊåÅ</h4><p><strong>Ë∞ÉËØï</strong>Èô§‰∫Ü IDE ÁöÑ Debug ‰πãÂêéÔºåËøòÂèØÊîØÊåÅÁ∫ø‰∏äÂ∫îÁî®Êüê‰∫õÂÖ•Âè£ÊîØÊåÅÂä†ËΩΩÈÖçÁΩÆ‰ø°ÊÅØÂπ∂ÂèØÊâãÂä®Ë∞ÉËØïË°•‰∏Å„ÄÇÊØîÂ¶ÇËØ¥Âú®Êüê‰∫õ‰∏öÂä°Êó†Áõ∏ÂÖ≥ÁöÑÈ°µÈù¢Â¶Ç <strong>ÂÖ≥‰∫éÈ°µÈù¢</strong>ÁöÑÊüê‰∏™<strong>view</strong>Âú®ËøûÁª≠Âø´ÈÄüÁÇπÂáªËææÂà∞‰∏ÄÂÆöÊ¨°Êï∞ÂêéÂºπÂá∫ÂØπËØùÊ°ÜÔºåÂú®ÂØπËØùÊ°ÜËæìÂÖ•ÂÜÖÈÉ®ÊµãËØïÁ†Å‰πãÂêéÂ∞±ÂèØËøõÂÖ•<strong>Ë∞ÉËØïÁïåÈù¢</strong>„ÄÇ</p>
<p><img src="https://raw.githubusercontent.com/YummyLau/hexo/master/source/pics/20200502/patch_info_5.jpg" height="790" width="365" align="center"></p>
<p>Âè¶Â§ñÂú® <strong>ÂàÜÂèëÂπ≥Âè∞ÈÖçÁΩÆË°•‰∏Å‰ø°ÊÅØ</strong>Á´†ËäÇ‰∏≠Ê∂âÂèäÁöÑÈÖçÁΩÆ‰ø°ÊÅØ‰∏ãËΩΩÊàñË°•‰∏Å‰∏ãËΩΩ <em>downloadUrl</em>ÔºåÂèØËá™ÂÆö‰πâÂçèËÆÆÊâ©Â±ïËøõË°åÂ§öÂú∫ÊôØÊîØÊåÅ„ÄÇ</p>
<ul>
<li><strong>cmsÂçèËÆÆ</strong>ÔºåÈÄöËøáÂÜÖÈÉ®ÁöÑ CMS Êñá‰ª∂ÂçèËÆÆÊù•Ëé∑ÂèñÊñá‰ª∂ÊàñËÄÖ <em>Api</em> Êé•Âè£Êù•ËØ∑Ê±ÇÔºåÂ¶ÇÊûú URL ÊòØ‰ª• <strong>cms:</strong> ÂºÄÂ§¥ÁöÑÂçèËÆÆÂàôÂõ∫ÂÆö‰ªé CMS Êñá‰ª∂ÊúçÂä°Âô®ËØªÂèñ„ÄÇ</li>
<li><strong>http/httpsÂçèËÆÆ</strong>ÔºåÂ¶ÇÊûú URL ÊòØÂ∏∏ËßÑ <strong>http:/https:</strong> ÂºÄÂ§¥ÁöÑÂçèËÆÆÂàôÈªòËÆ§ÈúÄË¶Å‰∏ãËΩΩ„ÄÇ</li>
<li><strong>sdcardÂçèËÆÆ</strong>Ôºå‰ª•ËÆæÂ§áÁöÑ SDCARD Ê†πÁõÆÂΩï‰∏∫Ëµ∑ÁÇπËøõË°åÊ£ÄÁ¥¢ÔºåÂ¶ÇÊûú URL ÊòØ‰ª• <strong>sdcard:</strong> ÂºÄÂ§¥ÁöÑÂçèËÆÆÂàôÈªòËÆ§ËØªÂèñ SDCARD Êú¨Âú∞Êñá‰ª∂„ÄÇËØ•ÂçèËÆÆÁî®‰∫éÊµãËØï‰ΩøÁî®ÔºåÊØîÂ¶Ç <em>/sdcard/patch/config.txt</em> Á≠â„ÄÇ</li>
</ul>
<p><strong>Ë∞ÉËØïÁïåÈù¢</strong>Âú®Êâ´ÊèèË°•‰∏ÅËÑöÊú¨ÈÖçÁΩÆÊó∂ÔºåÂè™ÈúÄË¶ÅËæìÂÖ•Êª°Ë∂≥‰∏äËø∞ 3 ÁßçÂçèËÆÆ‰∏≠‰∏ÄÁßçÁöÑ URL Êù•Ëé∑ÂèñË°•‰∏Å‰ø°ÊÅØ„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÊï¥‰∏™Âä†ËΩΩÊµÅÁ®ãÈÉΩ‰ºöÂÆö‰πâÊµÅÁ®ãÁ†ÅËøõË°åÊ†áÁ§∫,ÂèØÂÆö‰πâÊûö‰∏æÁ±ªÊù•ÊîØÊåÅÔºå‰ª•‰∏ã‰ªÖ‰æõÂèÇËÄÉ„ÄÇ</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">public enum ReportStep &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Ëé∑ÂèñËÑöÊú¨Ôºå1ÂºÄÂ§¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    STEP_FETCH_SCRIPT(<span class="number">1</span>, <span class="string">"Ëé∑ÂèñÁÉ≠‰øÆÂ§çÈÖçÁΩÆËÑöÊú¨"</span>),</span><br><span class="line">    STEP_FETCH_SCRIPT_REMOTE(<span class="number">10</span>, <span class="string">"Ëé∑ÂèñËøúÁ´ØÈÖçÁΩÆËÑöÊú¨"</span>),</span><br><span class="line">    STEP_FETCH_SCRIPT_LOCAL(<span class="number">11</span>, <span class="string">"Ëé∑ÂèñÊú¨Âú∞ÈÖçÁΩÆËÑöÊú¨"</span>),</span><br><span class="line">    STEP_FETCH_SCRIPT_CMS(<span class="number">12</span>, <span class="string">"Ëé∑ÂèñCMSÈÖçÁΩÆËÑöÊú¨"</span>),</span><br><span class="line">    STEP_FETCH_SCRIPT_SUCCESS(<span class="number">100</span>, <span class="string">"Ëé∑ÂèñÈÖçÁΩÆÊàêÂäü"</span>, Level.DEBUG),</span><br><span class="line">    STEP_FETCH_SCRIPT_FAIL(<span class="number">101</span>, <span class="string">"Ëé∑ÂèñÈÖçÁΩÆÂ§±Ë¥•"</span>, Level.ERROR),</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Ëß£ÊûêËÑöÊú¨Ôºå2ÂºÄÂ§¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    STEP_RESOLVING_SCRIPT(<span class="number">2</span>, <span class="string">"Ëß£ÊûêÁÉ≠‰øÆÂ§çÈÖçÁΩÆËÑöÊú¨"</span>),</span><br><span class="line">    STEP_RESOLVING_SCRIPT_REMOTE(<span class="number">20</span>, <span class="string">"Ëß£ÊûêËøúÁ´ØÈÖçÁΩÆËÑöÊú¨"</span>),</span><br><span class="line">    STEP_RESOLVING_SCRIPT_LOCAL(<span class="number">21</span>, <span class="string">"Ëß£ÊûêÊú¨Âú∞ÈÖçÁΩÆËÑöÊú¨"</span>),</span><br><span class="line">    STEP_RESOLVING_SCRIPT_CMS(<span class="number">22</span>, <span class="string">"Ëß£ÊûêCMSÈÖçÁΩÆËÑöÊú¨"</span>),</span><br><span class="line">    STEP_RESOLVING_SCRIPT_LOCAL_SUCCESS(<span class="number">200</span>, <span class="string">"Ëß£ÊûêÊàêÂäü"</span>, Level.DEBUG),</span><br><span class="line">    STEP_RESOLVING_SCRIPT_LOCAL_FAIL(<span class="number">201</span>, <span class="string">"Ëß£ÊûêÂ§±Ë¥•"</span>, Level.ERROR),</span><br><span class="line">    STEP_RESOLVING_SCRIPT_MISS_CUR_PATCH_VERSION(<span class="number">2000</span>, <span class="string">"ÂΩìÂâçÂÆ¢Êà∑Á´ØÁâàÊú¨Êâæ‰∏çÂà∞ÁõÆÊ†áË°•‰∏Å"</span>, Level.ERROR),</span><br><span class="line">    STEP_RESOLVING_SCRIPT_CUR_PATCH_INVALID(<span class="number">2001</span>, <span class="string">"Ë°•‰∏Å‰∏∫Êó†ÊïàË°•‰∏ÅÔºåË°•‰∏ÅÈÖçÁΩÆ‰ø°ÊÅØÈÖçÁΩÆÈîôËØØ"</span>, Level.ERROR),</span><br><span class="line">    STEP_RESOLVING_SCRIPT_CUR_PATCH_CANT_HIT(<span class="number">2002</span>, <span class="string">"ÂÆ¢Êà∑Á´ØÁâàÊú¨ÁõÆÊ†áË°•‰∏ÅÊú™ÂëΩ‰∏≠ÁÅ∞Â∫¶"</span>, Level.ERROR),</span><br><span class="line">    STEP_RESOLVING_SCRIPT_CUR_PATCH_IS_REDUCTION(<span class="number">2003</span>, <span class="string">"ÁõÆÊ†áË°•‰∏Å‰∏∫ÂõûÊªöË°•‰∏Å"</span>, Level.DEBUG),</span><br><span class="line">    STEP_RESOLVING_SCRIPT_CUR_PATCH_HAS_PATCHED(<span class="number">2004</span>, <span class="string">"ÁõÆÊ†áË°•‰∏ÅÂ∑≤ÁªèË¢´Âä†ËΩΩËøáÔºåË∑≥Ëøá"</span>, Level.DEBUG),</span><br><span class="line">    STEP_RESOLVING_SCRIPT_HAS_SAME_NAME_FILE_BUT_MD5(<span class="number">2005</span>, <span class="string">"Êú¨Âú∞Ë°•‰∏ÅÁõÆÂΩïÊü•ËØ¢Âà∞‰∏éÁõÆÊ†áË°•‰∏ÅÂêåÂêçÁöÑÊñá‰ª∂Ôºå‰ΩÜmd5Ê†°È™åÂ§±Ë¥•"</span>, Level.ERROR),</span><br><span class="line">    STEP_RESOLVING_SCRIPT_HAS_SAME_NAME_FILE_AND_MATCH_MD5(<span class="number">2006</span>, <span class="string">"Êú¨Âú∞Ë°•‰∏ÅÁõÆÂΩïÊü•ËØ¢Âà∞‰∏éÁõÆÊ†áË°•‰∏ÅÂêåÂêçÁöÑÊñá‰ª∂Ôºåmd5Ê†°È™åÊàêÂäü"</span>, Level.DEBUG),</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Ëé∑ÂèñË°•‰∏ÅÔºå3ÂºÄÂ§¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    STEP_FETCH_PATCH_FILE(<span class="number">3</span>, <span class="string">"Ëé∑ÂèñË°•‰∏Å"</span>),</span><br><span class="line">    STEP_FETCH_PATCH_FILE_REMOTE(<span class="number">30</span>, <span class="string">"‰ªéËøúÁ´ØËé∑Âèñ‰∏ãËΩΩË°•‰∏ÅÊñá‰ª∂"</span>),</span><br><span class="line">    STEP_FETCH_PATCH_FILE_LOCAL(<span class="number">31</span>, <span class="string">"‰ªéÊú¨Âú∞ÁõÆÂΩïËé∑ÂèñË°•‰∏ÅÊñá‰ª∂"</span>),</span><br><span class="line">    STEP_FETCH_PATCH_SUCCESS(<span class="number">300</span>, <span class="string">"Ëé∑ÂèñË°•‰∏ÅÊñá‰ª∂ÊàêÂäü"</span>, Level.DEBUG),</span><br><span class="line">    STEP_FETCH_PATCH_FAIL(<span class="number">301</span>, <span class="string">"Ëé∑ÂèñË°•‰∏ÅÊñá‰ª∂Â§±Ë¥•"</span>, Level.ERROR),</span><br><span class="line">    STEP_FETCH_PATCH_MATCH_MD5(<span class="number">3000</span>, <span class="string">"Ê†°È™åË°•‰∏ÅÊñá‰ª∂ md5 ÊàêÂäü"</span>, Level.DEBUG),</span><br><span class="line">    STEP_FETCH_PATCH_MISS_MD5(<span class="number">3001</span>, <span class="string">"Ê†°È™åË°•‰∏ÅÊñá‰ª∂ md5 Â§±Ë¥•"</span>, Level.ERROR),</span><br><span class="line">    STEP_FETCH_PATCH_WRITE_DISK_SUCCESS(<span class="number">3002</span>, <span class="string">"Ë°•‰∏ÅÊñá‰ª∂ÂÜôÂÖ•Ë°•‰∏ÅÁõÆÂΩïÊàêÂäü"</span>, Level.DEBUG),</span><br><span class="line">    STEP_FETCH_PATCH_WRITE_DISK_FAIL(<span class="number">3003</span>, <span class="string">"Ë°•‰∏ÅÊñá‰ª∂ÂÜôÂÖ•Ë°•‰∏ÅÁõÆÂΩïÂ§±Ë¥•"</span>, Level.ERROR),</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ‰øÆÂ§çË°•‰∏ÅÔºå4ÂºÄÂ§¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    STEP_PATCH(<span class="number">4</span>, <span class="string">"Ë°•‰∏Å‰øÆÂ§ç"</span>),</span><br><span class="line">    STEP_PATCH_LOAD_SUCCESS(<span class="number">40</span>, <span class="string">"ËØªÂèñË°•‰∏ÅÊñá‰ª∂ÊàêÂäü"</span>, Level.DEBUG),</span><br><span class="line">    STEP_PATCH_LOAD_FAIL(<span class="number">41</span>, <span class="string">"ËØªÂèñË°•‰∏ÅÊñá‰ª∂Â§±Ë¥•"</span>, Level.ERROR),</span><br><span class="line">    STEP_PATCH_RESULT_SUCCESS(<span class="number">400</span>, <span class="string">"Ë°•‰∏Å‰øÆÂ§çÊàêÂäü"</span>, Level.DEBUG),</span><br><span class="line">    STEP_PATCH_RESULT_FAIL(<span class="number">4001</span>, <span class="string">"Ë°•‰∏Å‰øÆÂ§çÂ§±Ë¥•"</span>, Level.ERROR),</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Ë°•‰∏ÅÂõûÊªöÔºå4ÂºÄÂ§¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    STEP_ROLLBACK(<span class="number">5</span>, <span class="string">"Ë°•‰∏ÅÂõûÊªö"</span>),</span><br><span class="line">    STEP_ROLLBACK_RESULT_SUCCESS(<span class="number">50</span>, <span class="string">"Ë°•‰∏ÅÂõûÊªöÊàêÂäü"</span>, Level.DEBUG),</span><br><span class="line">    STEP_ROLLBACK_RESULT_FAIL(<span class="number">51</span>, <span class="string">"Ë°•‰∏ÅÂõûÊªöÂ§±Ë¥•"</span>, Level.ERROR);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public int step;</span><br><span class="line">    public String desc;</span><br><span class="line">    @Level</span><br><span class="line">    public int logLevel;</span><br><span class="line"></span><br><span class="line">    ReportStep(int step, String desc) &#123;</span><br><span class="line">        this(step, desc, Level.INFO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReportStep(int step, String desc, int logLevel) &#123;</span><br><span class="line">        this.step = step;</span><br><span class="line">        this.desc = desc;</span><br><span class="line">        this.logLevel = logLevel;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Âú®Ë°•‰∏ÅÊµÅÁ®ãÁöÑÊØè‰∏Ä‰∏™ËäÇÁÇπÈÉΩËøõË°å Log Êó•ÂøóËæìÂá∫ÔºåÈô§‰∫ÜËæìÂá∫Âà∞ IDE Âíå<strong>Ë∞ÉËØïÁïåÈù¢</strong>Â§ñÔºåËøòÈúÄ‰∏ä‰º†Âà∞ÊØè‰∏™È°πÁõÆÁöÑÊó•ÂøóÊúçÂä°Âô®‰ª•‰æøÂàÜÊûêÁ∫ø‰∏äË°•‰∏ÅÊµÅÁ®ãÁöÑÂÖ∑‰ΩìÊÉÖÂÜµÂèäË°•‰∏ÅÊïàÊûú„ÄÇ</p>
<p>Âà∞ËøôÔºå‰ªé<strong>ÊäÄÊúØÂéüÁêÜ-ÊäÄÊúØÈÄâÂûã-ÂÆûË∑µÊµÅÁ®ã</strong>Êï¥‰ΩìÊÄùË∑Ø‰∏äÂ∏åÊúõ‰ºöÂ§ßÂÆ∂ÊúâÂ∏ÆÂä©~„ÄÇ</p>
<p>Á†ÅÂ≠ó‰∏çÊòìÔºåÂ¶ÇÂØπ‰Ω†Êúâ‰ª∑ÂÄºÔºåÁÇπËµûÊîØÊåÅ‰∏Ä‰∏ãÂêß~</p>
<p><strong>‰∏ìÊ≥® Android ËøõÈò∂ÊäÄÊúØÂàÜ‰∫´ÔºåËÆ∞ÂΩïÊû∂ÊûÑÂ∏àÈáéËõÆÊàêÈïø‰πãË∑Ø</strong></p>
<blockquote>
<p>Â¶ÇÊûúÂú®AndroidÈ¢ÜÂüüÊúâÈÅáÂà∞‰ªª‰ΩïÈóÆÈ¢òÔºåÂåÖÊã¨È°πÁõÆÈÅáÂà∞ÁöÑÊäÄÊúØÈóÆÈ¢òÔºåÈù¢ËØïÂèäÁÆÄÂéÜÊèèËø∞ÈóÆÈ¢òÔºå‰∫¶ÊàñÂØπÊú™Êù•ËÅå‰∏öËßÑÂàíÊúâÁñëÊÉëÔºåÂèØÊ∑ªÂä†ÊàëÂæÆ‰ø°  „ÄåMing_Lyan„Äç ÊàñÂÖ≥Ê≥®ÂÖ¨‰ºóÂè∑ „ÄåAndroid‰πãÁ¶Ö„ÄçÔºå‰ºöÂ∞ΩËá™ÊâÄËÉΩÂíå‰Ω†ËÆ®ËÆ∫Ëß£ÂÜ≥„ÄÇ<br>ÂêéÁª≠‰ºöÈíàÂØπ ‚ÄúAndroid È¢ÜÂüüÁöÑÂøÖÂ§áËøõÈò∂ÊäÄÊúØ‚ÄùÔºå‚ÄúAndroidÈ´òÂèØÁî®Êû∂ÊûÑËÆæËÆ°ÂèäÂÆûË∑µ‚Äù Ôºå‚Äú‰∏öÂä°‰∏≠ÁöÑÁñëÈöæÊùÇÁóáÂèäËß£ÂÜ≥ÊñπÊ°à‚Äù Á≠âÂÆûÁî®ÂÜÖÂÆπËøõË°åÂàÜ‰∫´„ÄÇ<br>‰πü‰ºöÂàÜ‰∫´‰Ωú‰∏∫ÊäÄÊúØËÄÖÂ¶Ç‰ΩïÂú®ÂÖ¨Âè∏ÈáéËõÆÊàêÈïøÔºåÂåÖÊã¨ÊäÄÊúØËøõÊ≠•ÔºåËÅåÁ∫ßÂèäÊî∂ÂÖ•ÁöÑÊèêÂçá„ÄÇ<br>Ê¨¢ËøéÊù•Êí©„ÄÇ</p>
</blockquote>

      
    </div>
    
    
    

    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Êú¨Êñá‰ΩúËÄÖÔºö</strong>
    yummyLau
  </li>
  <li class="post-copyright-link">
    <strong>Êú¨ÊñáÈìæÊé•Ôºö</strong>
    <a href="http://yummylau.com/2020/12/07/2020-12-07/" title="ÊïëÊàë‰∫éÊ∞¥Ê∑±ÁÅ´ÁÉ≠ÁöÑ„ÄåÁÉ≠‰øÆÂ§ç„Äç">http://yummylau.com/2020/12/07/2020-12-07/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ÁâàÊùÉÂ£∞ÊòéÔºö </strong>
    Êú¨ÂçöÂÆ¢ÊâÄÊúâÊñáÁ´†Èô§ÁâπÂà´Â£∞ÊòéÂ§ñÔºåÂùáÈááÁî® <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> ËÆ∏ÂèØÂçèËÆÆ„ÄÇËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§ÑÔºÅ
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/ÁÉ≠‰øÆÂ§ç/" rel="tag"># ÁÉ≠‰øÆÂ§ç</a>
          
            <a href="/tags/Android/" rel="tag"># Android</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/07/27/ÊàëÊòØÂ¶Ç‰ΩïËÆæËÆ°ÂèäÊîπÈÄ† PanelSwitchHelper Â∫ìÔΩúÂÆûÊàòÁØáÁ´†/" rel="next" title="ÊàëÊòØÂ¶Ç‰ΩïËÆæËÆ°ÂèäÊîπÈÄ† PanelSwitchHelper Â∫ìÔΩúÂÆûÊàòÁØáÁ´†">
                <i class="fa fa-chevron-left"></i> ÊàëÊòØÂ¶Ç‰ΩïËÆæËÆ°ÂèäÊîπÈÄ† PanelSwitchHelper Â∫ìÔΩúÂÆûÊàòÁØáÁ´†
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            ÊñáÁ´†ÁõÆÂΩï
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Á´ôÁÇπÊ¶ÇËßà
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/uploads/avatar.jpg" alt="yummyLau">
            
              <p class="site-author-name" itemprop="name">yummyLau</p>
              <p class="site-description motion-element" itemprop="description">Âä™ÂäõËÆ©Ëá™Â∑±Êõ¥‰ºòÁßÄ„ÄÇ</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">87</span>
                  <span class="site-state-item-name">Êó•Âøó</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">ÂàÜÁ±ª</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">44</span>
                  <span class="site-state-item-name">Ê†áÁ≠æ</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/YummyLau" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ÊäÄÊúØÂéüÁêÜ"><span class="nav-number">1.</span> <span class="nav-text">ÊäÄÊúØÂéüÁêÜ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Á±ªÂÜ∑‰øÆÂ§ç"><span class="nav-number">1.1.</span> <span class="nav-text">Á±ªÂÜ∑‰øÆÂ§ç</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#QZoneÊñπÊ°à"><span class="nav-number">1.1.1.</span> <span class="nav-text">QZoneÊñπÊ°à</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ÊâãQÊñπÊ°à"><span class="nav-number">1.2.</span> <span class="nav-text">ÊâãQÊñπÊ°à</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TinkerÊñπÊ°à"><span class="nav-number">1.3.</span> <span class="nav-text">TinkerÊñπÊ°à</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SophixÊñπÊ°à"><span class="nav-number">1.4.</span> <span class="nav-text">SophixÊñπÊ°à</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Á±ªÁÉ≠Êõ¥Êñ∞"><span class="nav-number">1.5.</span> <span class="nav-text">Á±ªÁÉ≠Êõ¥Êñ∞</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ÂÆ¢Êà∑Á´ØÂä†ËΩΩË°•‰∏Å‰ø°ÊÅØ"><span class="nav-number">1.5.1.</span> <span class="nav-text">ÂÆ¢Êà∑Á´ØÂä†ËΩΩË°•‰∏Å‰ø°ÊÅØ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ë∞ÉËØï‰∏éÊó•ÂøóÊîØÊåÅ"><span class="nav-number">1.5.2.</span> <span class="nav-text">Ë∞ÉËØï‰∏éÊó•ÂøóÊîØÊåÅ</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yummyLau</span>

  
</div>


  <div class="powered-by">Áî± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> Âº∫ÂäõÈ©±Âä®</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">‰∏ªÈ¢ò &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'pPdkM9YTrgYDV8coDCdALdmi-gzGzoHsz',
        appKey: '5HrONz3gb8XPDrUna01sa0gY',
        placeholder: 'Áïô‰∏ã‰Ω†ÁöÑË∂≥ËøπÂëó „ÉæÔæâ‚âß‚àÄ‚â¶)o',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

</body>
</html>
