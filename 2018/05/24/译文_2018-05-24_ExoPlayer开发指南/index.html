<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="多媒体,Android译文,">










<meta name="description" content="开发者指南视频播放和音乐播是安卓设备上流行的用户行为 。 Android 框架提供 MediaPlayer 以最少的编码来解决播放媒体的问题 ， 也提供了低版本媒体 API ， 比如 MediaCodec ， AudioTrack 和 MediaDrm 用于自主定制媒体播放的方案 。 ExoPlayer 是一个构建于 Android 低版本 API 之上的开源应用项目 。 本指南描述了 ：  使用">
<meta name="keywords" content="多媒体,Android译文">
<meta property="og:type" content="article">
<meta property="og:title" content="ExoPlayer开发指南 (译)">
<meta property="og:url" content="http://yummylau.com/2018/05/24/译文_2018-05-24_ExoPlayer开发指南/index.html">
<meta property="og:site_name" content="YummyLau">
<meta property="og:description" content="开发者指南视频播放和音乐播是安卓设备上流行的用户行为 。 Android 框架提供 MediaPlayer 以最少的编码来解决播放媒体的问题 ， 也提供了低版本媒体 API ， 比如 MediaCodec ， AudioTrack 和 MediaDrm 用于自主定制媒体播放的方案 。 ExoPlayer 是一个构建于 Android 低版本 API 之上的开源应用项目 。 本指南描述了 ：  使用">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-03-10T05:35:03.479Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ExoPlayer开发指南 (译)">
<meta name="twitter:description" content="开发者指南视频播放和音乐播是安卓设备上流行的用户行为 。 Android 框架提供 MediaPlayer 以最少的编码来解决播放媒体的问题 ， 也提供了低版本媒体 API ， 比如 MediaCodec ， AudioTrack 和 MediaDrm 用于自主定制媒体播放的方案 。 ExoPlayer 是一个构建于 Android 低版本 API 之上的开源应用项目 。 本指南描述了 ：  使用">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yummylau.com/2018/05/24/译文_2018-05-24_ExoPlayer开发指南/">





  <title>ExoPlayer开发指南 (译) | YummyLau</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">YummyLau</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Keep moving！</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yummylau.com/2018/05/24/译文_2018-05-24_ExoPlayer开发指南/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yummyLau">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YummyLau">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ExoPlayer开发指南 (译)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-24T15:38:42+08:00">
                2018-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/译文/" itemprop="url" rel="index">
                    <span itemprop="name">译文</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/24/译文_2018-05-24_ExoPlayer开发指南/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/05/24/译文_2018-05-24_ExoPlayer开发指南/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="开发者指南"><a href="#开发者指南" class="headerlink" title="开发者指南"></a>开发者指南</h2><p>视频播放和音乐播是安卓设备上流行的用户行为 。 Android 框架提供 <code>MediaPlayer</code> 以最少的编码来解决播放媒体的问题 ， 也提供了低版本媒体 API ， 比如 <code>MediaCodec</code> ， <code>AudioTrack</code> 和 <code>MediaDrm</code> 用于自主定制媒体播放的方案 。</p>
<p><strong>ExoPlayer</strong> 是一个构建于 Android 低版本 API 之上的开源应用项目 。 本指南描述了 ：</p>
<ul>
<li>使用 <strong>ExoPlayer</strong> 库，并提供了具体场景的 <a href="https://github.com/google/ExoPlayer/tree/release-v2/demos/main" target="_blank" rel="noopener">main demo app</a> 。</li>
<li>描述 <strong>ExoPlayer</strong> 使用的利弊 。</li>
<li>使用 <strong>ExoPlayer</strong> 播放 <code>DASH</code> ， <code>SmoothStreaming</code> 和 <code>HLS</code> 自适应流 ， 以及更多的格式视频 ， 如 <code>MP4</code> ， <code>M4A</code> ， <code>FMP4</code> ， <code>WebM</code> ， <code>MKV</code> ， <code>MP3</code> ， <code>WAV</code> ， <code>Ogg</code> ，<code>MPEG-TS</code> ， <code>MPEG-PS</code> ， <code>FLV</code> 和 <code>ADTS (ACC)</code> 等等 。</li>
<li>描述 <strong>ExoPlayer</strong> 包含的事件、消息、定制及 DRM 的支持 。</li>
</ul>
<h3 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h3><hr>
<p>相对于安卓内置的 <strong>MediaPlayer</strong> , <strong>ExoPlayer</strong> 有以下优点 ：</p>
<ul>
<li>支持 <code>DASH</code> (动态自适应流媒体) 和 <code>SmoothStreaming</code> 格式 ， 具体支持的格式可查看 <a href="https://github.com/google/ExoPlayer/tree/release-v2/demos/mainhttps://google.github.io/ExoPlayer%20/supported-formats.html" target="_blank" rel="noopener">Supported formats</a> 。</li>
<li>支持 <code>HLS</code> 高级特性 ，比如处理 <code>#EXT-X-DISCONTINUIT</code> 标签 。</li>
<li>无缝地合并、连接和循环媒体 。</li>
<li>更新播放器版本 ，<strong>ExoPlayer</strong> 作为依赖库用于构建应用，你可以轻易地升级版本 。</li>
<li>良好的设备兼容，在不同的版本设备上很少产生问题 。</li>
<li>支持 4.4 及以上使用常见加密方式 。</li>
<li>支持开发者自定义扩展播放器来适应自己的项目 ，为此 <strong>ExoPlayer</strong> 预留了很多可替代的组件 。</li>
<li>支持使用官方扩展组件来整合其他开源库 ， 比如 <a href="https://github.com/google/ExoPlayer/tree/release-v2/extensions/ima" target="_blank" rel="noopener">IMA extension</a> 使得开发者更简便地接入 <a href="https://developers.google.com/interactive-media-ads" target="_blank" rel="noopener">Interactive Media Ads SDK</a> 来实现盈利 。</li>
</ul>
<p>值得留意的是 ，<strong>ExoPlayer</strong> 也存在部分缺点：</p>
<ul>
<li>对于仅实现音频播放的设备 ， <code>ExoPlayer</code> 比其他媒体播放器可能会消耗更多的电量 。 详情可参考 <a href="https://google.github.io/ExoPlayer/battery-consumption.html" target="_blank" rel="noopener">Battery consumption page</a></li>
</ul>
<h3 id="库概述"><a href="#库概述" class="headerlink" title="库概述"></a>库概述</h3><hr>
<p>库的核心是 <em>ExoPlayer</em> 接口 。 <em>ExoPlayer</em> 暴露了传统高级媒体播放器的功能 ， 如缓冲、播放、暂停及进度控制 。 预先设想实现了如何播放、如何存储及在哪存储 ，如何渲染一些媒体等 ， 而不是实现直接实现加载和渲染 media 。这些都是 <strong>ExoPlayer</strong> 在播放器被创建或准备回播时 ，注入组件委托者来实现 。 这些组件分别是：</p>
<ul>
<li><strong>MediaSource</strong> 定义了如何播放、加载 media ， 以及在哪里加载可读的 media 。 <em>MediaSource</em> 对象会在回播开始时调用 <code>ExoPlaer.prepare</code> 后被注入 。</li>
<li><strong>Render</strong> 能渲染 MediaSource 中各个独立组件的渲染器 。 <em>Render</em> 对象会在播放器创建时注入 。</li>
<li><strong>TrackSelector</strong> 从 MediaSource 中选择轨道以供 <em>Render</em> 渲染器消费 。 <em>TrackSelector</em> 对象会在播放器创建时注入 。</li>
<li><strong>LoadControl</strong> 控制 MediaSource 缓冲更多的 media 及 控制缓冲量 。 <em>LoadControl</em> 对象会在播放器创建时注入 。</li>
</ul>
<p>库提供一些默认实现组件以供常见用例使用 ，后续将有更详细的描述 。 一个 <em>ExoPlayer</em> 对象能使用多个默认组件 ，但也可以使用一些非标准行为的自定义组件 。 比如通过注入自定义 <em>LoadControl</em> 对象来改变播放器的缓冲策略 ， 或者注入自定义 <em>Render</em> 对象来使用 Android 不支持的视频编解码器。</p>
<p>注入实现播放器功能组件的理念贯穿整个库 。 上述默认实现的组件都是委托工作到进一步注入的组件中 ，这使得许多子组件可以通过自定义实现来替换其功能 。例如 ， 默认的 <code>MediaSource</code> 实现中，其构造器需要注入一个或多个 <code>DataSource</code> 工厂对象。 通过提供自定义工厂能从非标注输入源中或不同的网络堆栈中加载数据 。</p>
<h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><hr>
<p>对于简单用例，开发者可通过以下步骤使用 <strong>ExoPlayer</strong> ：</p>
<ul>
<li>添加 ExoPlayer 依赖到项目 。</li>
<li>创建一个 <em>SimpleExoPlayer</em> 对象 。</li>
<li>绑定播放器到界面 (用于视频输入及用户输入) 。</li>
<li>把 <em>MediaSource</em> 给播放器加载准备播放 。</li>
<li>播放工作完成后释放播放器 。</li>
</ul>
<p>下面将详细描述这些步骤 。 对于完成实例 ， 请参考<a href="https://github.com/google/ExoPlayer/tree/release-v2/demos/main" target="_blank" rel="noopener">main demo app</a> 中的 <code>PlayerActivity</code> 。</p>
<h4 id="添加-ExoPlayer-作为项目依赖"><a href="#添加-ExoPlayer-作为项目依赖" class="headerlink" title="添加 ExoPlayer 作为项目依赖"></a>添加 ExoPlayer 作为项目依赖</h4><p>确保项目文件 <code>build.gradle</code> 根节点中包含 <code>JCenter</code> 和 <code>Google</code> 仓库</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">repositories</span> &#123;</span><br><span class="line">    <span class="selector-tag">jcenter</span>()</span><br><span class="line">    <span class="selector-tag">google</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接着在 app 模块中的 <code>build.gredle</code> 添加 ExoPlayer 库依赖 ：</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">implementation</span> <span class="string">'com.google.android.exoplayer:exoplayer:2.X.X'</span></span><br></pre></td></tr></table></figure>
<p><code>2.X.X</code> 是你所需要的库版本 。 另外 ， 你也可以只依赖项目所需要的库 。 比如 ， 如果项目只需要播放 <code>DASH</code> 格式的内容 ，将会添加 <code>Code</code> , <code>DASH</code> 和 <code>UI</code> 库 ：</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">implementation</span> <span class="string">'com.google.android.exoplayer:exoplayer-core:2.X.X'</span></span><br><span class="line"><span class="keyword">implementation</span> <span class="string">'com.google.android.exoplayer:exoplayer-dash:2.X.X'</span></span><br><span class="line"><span class="keyword">implementation</span> <span class="string">'com.google.android.exoplayer:exoplayer-ui:2.X.X'</span></span><br></pre></td></tr></table></figure>
<p>下面列出的是可用的模块 。 添加一个完整的 ExoPlayer 库相当于添加下面所有的独立库 :</p>
<ul>
<li><strong>exoplayer-core</strong> : 核心功能 (必须)</li>
<li><strong>exoplayer-dash</strong> : 用于支持 DASH 格式的内容</li>
<li><strong>exoplayer-hls</strong> : 用于支持 HLS 格式的内容</li>
<li><strong>exoplayer-smoothstreaming</strong> : 用于支持 SmoothStreaming 格式的内容</li>
<li><strong>exoplayer-ui</strong> : ExoPlayer 能使用的 UI 组件和资源</li>
</ul>
<p>除了库模块外 ， ExoPlayer 有多个依赖外部库实现的扩展模块用于提供额外的功能 。 这些内容不再本指南的范围内，具体细节可以查看 <a href="https://github.com/google/ExoPlayer/tree/release-v2/extensions/" target="_blank" rel="noopener">extensions directory</a> 及 README 文件 。</p>
<h4 id="创建播放器"><a href="#创建播放器" class="headerlink" title="创建播放器"></a>创建播放器</h4><p>你可以使用 <code>ExoPlayerFactory</code> 来创建一个 <em>ExoPlayer</em> 对象 。 工厂类提供了一系列方法来创建可定制化的 <em>ExoPlayer</em> 对象 。 对于绝大部分用例 , <code>ExoPlayerFactory.newSimpleInstance</code> 会被调用 。 这些方法会返回 <code>SimpleExoPlayer</code> 对象 ， 该继承于 <code>ExoPlayer</code> 并添加了额外的高级播放器高级功能。 下面的代码是展示如何创建一个 <code>SimpleExoPlayer</code> 对象 。</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. Create a default TrackSelector</span></span><br><span class="line">Handler mainHandler = <span class="keyword">new</span> <span class="type">Handler</span>();</span><br><span class="line">BandwidthMeter bandwidthMeter = <span class="keyword">new</span> <span class="type">DefaultBandwidthMeter</span>();</span><br><span class="line">TrackSelection.Factory videoTrackSelectionFactory =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">AdaptiveTrackSelection</span>.Factory(bandwidthMeter);</span><br><span class="line">TrackSelector trackSelector =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">DefaultTrackSelector</span>(videoTrackSelectionFactory);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Create the player</span></span><br><span class="line">SimpleExoPlayer player =</span><br><span class="line">    ExoPlayerFactory.<span class="keyword">new</span><span class="type">SimpleInstance</span>(context, trackSelector);</span><br></pre></td></tr></table></figure>
<h4 id="绑定一个播放器到视图"><a href="#绑定一个播放器到视图" class="headerlink" title="绑定一个播放器到视图"></a>绑定一个播放器到视图</h4><p>ExoPlayer 库提供了一个 <code>PlayerView</code> 类 ， 封装了 <code>PlayerControlView</code> 控制层视图和 <code>Surface</code> 视频呈现层 。 <code>PlayerView</code> 能包含写入程序 layout 布局中 。 下面代码是展示绑定一个播放器到视图上 ：</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Bind the player to the view.</span></span><br><span class="line">playerView.setPlayer<span class="comment">(player)</span>;</span><br></pre></td></tr></table></figure>
<p>如果你需要进一步控制播放器的控制层及视频呈现层 ， 可以直接调用 <code>SimpleExoPlayer</code> 的 <code>setVideoSurfaceView</code> ， <code>setVideoTextureView</code> ， <code>setVideoSurfaceHolder</code> 或 <code>setVideoSurface</code> 来分别设置 <code>SurfaceView</code> ， <code>TextureView</code> ， <code>SurfaceHolder</code> 或者 <code>Surface</code> 。 可以把 <code>PlayerControlView</code> 当做一个独立的组件使用 ， 或者实现自己的播放控制来直接与用户进行互动 。 在播放的时候， <code>setTextOutput</code> 和 <code>setId3OutPut</code> 能够被用于接收标题和 ID3 元数据 。</p>
<h4 id="准备播放器"><a href="#准备播放器" class="headerlink" title="准备播放器"></a>准备播放器</h4><p>在 ExoPlayer 中每一块媒体都由 <code>MediaSource</code> 提供。 为了播放每一块媒体 ， 你必须先创建一个对应的 <code>MediaSource</code> 对象并传递给 <code>ExoPlayer.prepare</code> 。 ExoPlayer 库提供了一系列 <code>MediaSource</code> 实现类 ， 如 <code>DASH (DashMediaSource)</code> ， <code>SmoothStreaming (SsMediaSource)</code> ， <code>HLS (HlsMediaSource)</code> 和 常见的媒体文件 (ExtractorMediaSource) 。 这些实现的细节会在后续的指南中描述 。 下面的代码展示了播放器利用 <code>MediaSource</code> 准备播放一个 MP4 文件 ：</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Measures bandwidth during playback. Can be null if not required.</span></span><br><span class="line">DefaultBandwidthMeter bandwidthMeter = <span class="keyword">new</span> <span class="type">DefaultBandwidthMeter</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Produces DataSource instances through which media data is loaded.</span></span><br><span class="line">DataSource.Factory dataSourceFactory = <span class="keyword">new</span> <span class="type">DefaultDataSourceFactory</span>(context,</span><br><span class="line">    Util.getUserAgent(context, <span class="string">"yourApplicationName"</span>), bandwidthMeter);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This is the MediaSource representing the media to be played.</span></span><br><span class="line">MediaSource videoSource = <span class="keyword">new</span> <span class="type">ExtractorMediaSource</span>.Factory(dataSourceFactory)</span><br><span class="line">    .createMediaSource(mp4VideoUri);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Prepare the player with the source.</span></span><br><span class="line">player.prepare(videoSource);</span><br></pre></td></tr></table></figure>
<h4 id="控制播放器"><a href="#控制播放器" class="headerlink" title="控制播放器"></a>控制播放器</h4><p>一旦播放器准备就绪 ， 就可以通过调用方法来控制播放行为 。 比如 <code>setPlayWhenReady</code> 可控制是否暂停/播放 ； <code>seekTo</code> 可在媒体进度中寻求播放点 ； <code>setRepeatMode</code> 可可控制媒体是否循环和如何循环 ； <code>setPlaybackParameters</code> 可调整播放时的速度和音调 。</p>
<p>如果播放器绑定了 <code>PlayerView</code> 或者 <code>PlayerControlView</code> ，则用户与视图的互动会调用播放器的对应方法。</p>
<h4 id="监听播放器事件"><a href="#监听播放器事件" class="headerlink" title="监听播放器事件"></a>监听播放器事件</h4><p>状态的改变或者播放异常这些事件会被上报到已注册的 <code>Player.EventListener</code> 对象 。注册一个监听对象用于接收事件是比较简单的 ：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Add a listener to receive events from the player.</span></span><br><span class="line"><span class="selector-tag">player</span><span class="selector-class">.addListener</span>(eventListener);</span><br></pre></td></tr></table></figure>
<p>如果你只对其中部分事件感兴趣 ， 可继承 <code>Player.DefaultEventListener</code> 覆盖部分方法而不是实现 <code>Player.EventListener</code> 。</p>
<p>当你使用 <code>SimpleExoPlayer</code> 时， 还可以添加额外的监听 。 <code>addVideoListener</code> 方法允许你接收视频渲染相关的事件 , 这可能有助于你调整视图 。 <code>addAnalyticsListener</code> 方法允许你接收更细节的事件 ， 能有效帮助你分析播放行为 。</p>
<h4 id="释放播放器"><a href="#释放播放器" class="headerlink" title="释放播放器"></a>释放播放器</h4><p>当不在使用播放器时 ， 释放播放器是非常重要的 。 释放播放器能释放有限的资源 ， 如可供其他应用使用的视频解码器 ， 能通过调用 <code>ExoPlayer.release</code> 实现。</p>
<h3 id="媒体资源-MediaSource"><a href="#媒体资源-MediaSource" class="headerlink" title="媒体资源 (MediaSource)"></a>媒体资源 (MediaSource)</h3><hr>
<p>在 ExoPlayer 中，每一块媒体都由 <code>MediaSource</code> 提供 。 ExoPlayer 库提供了一系列 <code>MediaSource</code> 实现类 ， 如 <code>DASH (DashMediaSource)</code> , <code>SmoothStreaming (SsMediaSource)</code> ， <code>HLS (HlsMediaSource)</code> 和 常见的媒体文件 (ExtractorMediaSource) 。 可在 <a href="https://github.com/google/ExoPlayer/tree/release-v2/demos/main" target="_blank" rel="noopener">main demo app</a> 的 <code>PlayerActivity</code> 中查看如何实例化这四种对象 。</p>
<p>除了上述四种 <code>MediaSource</code> 的实现外 ， ExoPlayer 库也提供了 <code>MergingMediaSource</code> ， <code>LoopingMediaSource</code> 和 <code>ConcatenatingMediaSource</code> 。 这些 <code>MediaSource</code> 的实现能处理复杂的组合播放 。 下面将会描述一些常见的例子 。 注意这些例子虽然使用了相同类型的媒体资源 ， 但实际上是支持多种媒体资源组合播放的 。</p>
<h4 id="加载字幕"><a href="#加载字幕" class="headerlink" title="加载字幕"></a>加载字幕</h4><p><code>MergingMediaSource</code> 能够将给定的视频文件和独立的字幕文件合并成单一的播放资源 。</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Build the video MediaSource.</span></span><br><span class="line">MediaSource videoSource =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">ExtractorMediaSource</span>.Factory(...).createMediaSource(videoUri);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Build the subtitle MediaSource.</span></span><br><span class="line">Format subtitleFormat = Format.createTextSampleFormat(</span><br><span class="line">    id, <span class="comment">// An identifier for the track. May be null.</span></span><br><span class="line">    MimeTypes.APPLICATION_SUBRIP, <span class="comment">// The mime type. Must be set correctly.</span></span><br><span class="line">    selectionFlags, <span class="comment">// Selection flags for the track.</span></span><br><span class="line">    language); <span class="comment">// The subtitle language. May be null.</span></span><br><span class="line">MediaSource subtitleSource =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">SingleSampleMediaSource</span>.Factory(...)</span><br><span class="line">        .createMediaSource(subtitleUri, subtitleFormat, C.TIME_UNSET);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Plays the video with the sideloaded subtitle.</span></span><br><span class="line">MergingMediaSource mergedSource =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">MergingMediaSource</span>(videoSource, subtitleSource);</span><br></pre></td></tr></table></figure>
<h4 id="循环一个视频"><a href="#循环一个视频" class="headerlink" title="循环一个视频"></a>循环一个视频</h4><blockquote>
<p>如果不确定循环视频循环周期 ， 使用 <code>ExoPlayer.setRepeatMode</code> 替代 <code>LoopingMediaSource</code> 会更好 。</p>
</blockquote>
<p>一个视频能够被无缝循环播放特定次数 。 下面展示如何播放视频两次 ：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MediaSource <span class="keyword">source</span> =</span><br><span class="line">    <span class="keyword">new</span> ExtractorMediaSource.Factory(...).createMediaSource(videoUri);</span><br><span class="line"><span class="comment">// Plays the video twice.</span></span><br><span class="line">LoopingMediaSource loopingSource = <span class="keyword">new</span> LoopingMediaSource(<span class="keyword">source</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<h4 id="按照顺序播放视频"><a href="#按照顺序播放视频" class="headerlink" title="按照顺序播放视频"></a>按照顺序播放视频</h4><p><code>ConcatenatingMediaSource</code> 能将多个独立的 <code>MediaSource</code> 按照一定的顺序进行播放 。 下面用例展示顺序播放两个视频 。 视频间的切换时无缝衔接的 。 顺序播放的视频不要求是相同格式的 (比如一个视频可以是 480p H264 ， 另一个可以是 720p VP9) 。 播放源甚至可以是不同类型的 (比如可以一个视频衔接一个音频) 。 同时 ，也允许在单一连接中多次使用独立的 <code>MediaSource</code> ， <code>MediaSource</code> 也可以在播放前或播放时动态添加 ， 删除 和移动 。</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MediaSource firstSource =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">ExtractorMediaSource</span>.Factory(...).createMediaSource(firstVideoUri);</span><br><span class="line">MediaSource secondSource =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">ExtractorMediaSource</span>.Factory(...).createMediaSource(secondVideoUri);</span><br><span class="line"><span class="comment">// Plays the first video, then the second video.</span></span><br><span class="line">ConcatenatingMediaSource concatenatedSource =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">ConcatenatingMediaSource</span>(firstSource, secondSource);</span><br></pre></td></tr></table></figure>
<h4 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h4><p>开发者可以根据特定的用例自行组合 <code>MediaSource</code> 。 给定视频 A 和 视频 B ， 下面用例展示 <code>LoopingMediaSource</code>  和 <code>ConcatenatingMediaSource</code> 如何按照 (A , A , B) 的顺序进行播放 ：</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MediaSource firstSource =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">ExtractorMediaSource</span>.Factory(...).createMediaSource(firstVideoUri);</span><br><span class="line">MediaSource secondSource =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">ExtractorMediaSource</span>.Factory(...).createMediaSource(secondVideoUri);</span><br><span class="line"><span class="comment">// Plays the first video twice.</span></span><br><span class="line">LoopingMediaSource firstSourceTwice = <span class="keyword">new</span> <span class="type">LoopingMediaSource</span>(firstSource, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// Plays the first video twice, then the second video.</span></span><br><span class="line">ConcatenatingMediaSource concatenatedSource =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">ConcatenatingMediaSource</span>(firstSourceTwice, secondSource);</span><br></pre></td></tr></table></figure>
<p>接下来的用例实现的功能和上述例子一致 ， 实际上有多种实现的方式来达到一样的效果 。</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MediaSource firstSource =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">ExtractorMediaSource</span>.Builder(firstVideoUri, ...).build();</span><br><span class="line">MediaSource secondSource =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">ExtractorMediaSource</span>.Builder(secondVideoUri, ...).build();</span><br><span class="line"><span class="comment">// Plays the first video twice, then the second video.</span></span><br><span class="line">ConcatenatingMediaSource concatenatedSource =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">ConcatenatingMediaSource</span>(firstSource, firstSource, secondSource);</span><br></pre></td></tr></table></figure>
<h3 id="发送消息给组件"><a href="#发送消息给组件" class="headerlink" title="发送消息给组件"></a>发送消息给组件</h3><hr>
<p>开发者发送消息给 ExoPlayer 组件 ， 通过使用 <code>createMessage</code> 创建消息并调用 <code>PlayerMessage.send</code> 发送 。 默认情况下 ， 消息应该尽可能在播放线程中传递 ， 但也可对消息进行定制 ， 如设置回调线程 (使用 PlayerMessage.setHandler) 或指定传递播放位置 (使用 PlayerMessage.setPosition) 。 通过 ExoPlayer 发送消息能确保播放器当有其他操作被执行时 ， 该操作能被执行 。</p>
<p>ExoPlayer 绝大部分渲染器都允许在播放时接收消息更改配置信息 。 举个例子 ， 音频渲染器接收消息设置音量和视频渲染器接收消息设置 surface 。 这些消息都应该在播放线程中传递已确保线程安全 。</p>
<h3 id="定制"><a href="#定制" class="headerlink" title="定制"></a>定制</h3><hr>
<p>ExoPlayer 相对于安卓内置的 <code>MediaPlayer</code> 的一个明显优势就是支持开发者定制扩展播放器以更好的满足用户需求 。 ExoPlayer 库的设计都贯穿这一理念 ， 为了让开发者能方便地替代默认实现， 库设计了一系列接口和基础抽象类 。 下面有一些用例可供自定义构建组件 ：</p>
<ul>
<li><strong>Renderer</strong> ， 实现自定义 <code>Render</code> 渲染器来处理库不支持媒体类型 。</li>
<li><strong>TrackSelector</strong> ， 实现自定义 <code>TrackSelector</code> 轨道选择器允许开发者改变 <code>MediaSource</code> 暴露轨道的方式 ， 这些轨道会被每一个可用的渲染器所渲染 。</li>
<li><strong>LoadControl</strong> , 实现自定义 <code>LoadControl</code> 允许开发者改变播放器缓冲策略 。</li>
<li><strong>Extractor</strong> , 如果你如果支持一种当前库不支持的容器格式 ， 则可自定义 <code>Extractor</code> 和 <code>ExtractorMediaSource</code> 组合播放该类型的媒体 。</li>
<li><strong>MediaSource</strong> ， 如果你想获取媒体样品进行自定义渲染或更改 <code>MediaSrouce</code> 的合成行为，可实现自定义 <code>MediaSource</code></li>
<li><strong>DataSource</strong> , ExoPlayer 上游包中已包含多个 <code>DataSource</code> 的实现 。 你可以实现自己的 <code>DataSource</code> 从其他途径加载数据 ， 比如对于自定义协议 ， 使用自定义 HTTP 栈或自定义缓存来加载 。</li>
</ul>
<p>当构建自定义组件式时 ， 推荐采纳以下建议 ：</p>
<ul>
<li>自定义的组件需要上报事件给应用 ， 建议你使用相同的模型 (构造时需提供了事件监听及 <code>Handler</code>) 作为 ExoPlayer 组件模板 。</li>
<li>我们建议使用相同的模型 (允许在播放时更改配置 ， 如 <a href="https://google.github.io/ExoPlayer/guide.html#sending-messages-to-components" target="_blank" rel="noopener">Sending messages to components</a> 中描述) 作为 ExoPlayer 组件模板 。 为了实现这一行为 ， 你应该实现 <code>ExoPlayerComponent</code> 并在其 <code>handleMessage</code> 方法中接收配置变化 。 你的应用应该通过 ExoPlayer’s <code>sendMessages</code> 和 <code>blockingSendMessages</code> 方法来传递配置更改的信息 。</li>
</ul>
<h3 id="高级主题"><a href="#高级主题" class="headerlink" title="高级主题"></a>高级主题</h3><hr>
<h4 id="数字版权管理"><a href="#数字版权管理" class="headerlink" title="数字版权管理"></a>数字版权管理</h4><p>ExoPlayer 从 Android 4.4 (API级别19) 支持数字版权管理 (DRM) 媒体播放。 更多细节请查看 <a href="https://google.github.io/ExoPlayer/drm.html" target="_blank" rel="noopener">DRM page for more details</a> 。</p>
<h4 id="电量消耗"><a href="#电量消耗" class="headerlink" title="电量消耗"></a>电量消耗</h4><p>关于使用 ExoPlayer 的电量消耗信息可在 <a href="https://google.github.io/ExoPlayer/battery-consumption.html" target="_blank" rel="noopener">Battery consumption page</a> 中查阅 。</p>
<h4 id="最小化-使用ExoPlayer库"><a href="#最小化-使用ExoPlayer库" class="headerlink" title="最小化 使用ExoPlayer库"></a>最小化 使用ExoPlayer库</h4><p>最小化使用 ExoPlayer 库可在 <a href="https://google.github.io/ExoPlayer/shrinking.html" target="_blank" rel="noopener">Shrinking ExoPlayer page</a> 中查阅 。</p>

      
    </div>
    
    
    

    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    yummyLau
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://yummylau.com/2018/05/24/译文_2018-05-24_ExoPlayer开发指南/" title="ExoPlayer开发指南 (译)">http://yummylau.com/2018/05/24/译文_2018-05-24_ExoPlayer开发指南/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/多媒体/" rel="tag"># 多媒体</a>
          
            <a href="/tags/Android译文/" rel="tag"># Android译文</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/07/Git_2018-03-07_提交本地项目给GitHub/" rel="next" title="提交本地项目到GitHub">
                <i class="fa fa-chevron-left"></i> 提交本地项目到GitHub
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/05/25/多媒体_2018-05-25_多媒体音视频核心概念/" rel="prev" title="多媒体音视频核心概念">
                多媒体音视频核心概念 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/uploads/avatar.jpg" alt="yummyLau">
            
              <p class="site-author-name" itemprop="name">yummyLau</p>
              <p class="site-description motion-element" itemprop="description">努力让自己更优秀。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">65</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">42</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/YummyLau" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#开发者指南"><span class="nav-number">1.</span> <span class="nav-text">开发者指南</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#优缺点"><span class="nav-number">1.1.</span> <span class="nav-text">优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#库概述"><span class="nav-number">1.2.</span> <span class="nav-text">库概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开始"><span class="nav-number">1.3.</span> <span class="nav-text">开始</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#添加-ExoPlayer-作为项目依赖"><span class="nav-number">1.3.1.</span> <span class="nav-text">添加 ExoPlayer 作为项目依赖</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建播放器"><span class="nav-number">1.3.2.</span> <span class="nav-text">创建播放器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#绑定一个播放器到视图"><span class="nav-number">1.3.3.</span> <span class="nav-text">绑定一个播放器到视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#准备播放器"><span class="nav-number">1.3.4.</span> <span class="nav-text">准备播放器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#控制播放器"><span class="nav-number">1.3.5.</span> <span class="nav-text">控制播放器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#监听播放器事件"><span class="nav-number">1.3.6.</span> <span class="nav-text">监听播放器事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#释放播放器"><span class="nav-number">1.3.7.</span> <span class="nav-text">释放播放器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#媒体资源-MediaSource"><span class="nav-number">1.4.</span> <span class="nav-text">媒体资源 (MediaSource)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#加载字幕"><span class="nav-number">1.4.1.</span> <span class="nav-text">加载字幕</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#循环一个视频"><span class="nav-number">1.4.2.</span> <span class="nav-text">循环一个视频</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#按照顺序播放视频"><span class="nav-number">1.4.3.</span> <span class="nav-text">按照顺序播放视频</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#高级用法"><span class="nav-number">1.4.4.</span> <span class="nav-text">高级用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#发送消息给组件"><span class="nav-number">1.5.</span> <span class="nav-text">发送消息给组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#定制"><span class="nav-number">1.6.</span> <span class="nav-text">定制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#高级主题"><span class="nav-number">1.7.</span> <span class="nav-text">高级主题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数字版权管理"><span class="nav-number">1.7.1.</span> <span class="nav-text">数字版权管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#电量消耗"><span class="nav-number">1.7.2.</span> <span class="nav-text">电量消耗</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#最小化-使用ExoPlayer库"><span class="nav-number">1.7.3.</span> <span class="nav-text">最小化 使用ExoPlayer库</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yummyLau</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'pPdkM9YTrgYDV8coDCdALdmi-gzGzoHsz',
        appKey: '5HrONz3gb8XPDrUna01sa0gY',
        placeholder: '留下你的足迹呗 ヾﾉ≧∀≦)o',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

</body>
</html>
